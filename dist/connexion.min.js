"format amd";!function(global){function register(name,deps,declare){return 4===arguments.length?registerDynamic.apply(this,arguments):void doRegister(name,{declarative:!0,deps:deps,declare:declare})}function registerDynamic(name,deps,executingRequire,execute){doRegister(name,{declarative:!1,deps:deps,executingRequire:executingRequire,execute:execute})}function doRegister(name,entry){entry.name=name,name in defined||(defined[name]=entry),entry.normalizedDeps=entry.deps}function buildGroups(entry,groups){if(groups[entry.groupIndex]=groups[entry.groupIndex]||[],-1==indexOf.call(groups[entry.groupIndex],entry)){groups[entry.groupIndex].push(entry);for(var i=0,l=entry.normalizedDeps.length;l>i;i++){var depName=entry.normalizedDeps[i],depEntry=defined[depName];if(depEntry&&!depEntry.evaluated){var depGroupIndex=entry.groupIndex+(depEntry.declarative!=entry.declarative);if(void 0===depEntry.groupIndex||depEntry.groupIndex<depGroupIndex){if(void 0!==depEntry.groupIndex&&(groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex],depEntry),1),0==groups[depEntry.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");depEntry.groupIndex=depGroupIndex}buildGroups(depEntry,groups)}}}}function link(name){var startEntry=defined[name];startEntry.groupIndex=0;var groups=[];buildGroups(startEntry,groups);for(var curGroupDeclarative=!!startEntry.declarative==groups.length%2,i=groups.length-1;i>=0;i--){for(var group=groups[i],j=0;j<group.length;j++){var entry=group[j];curGroupDeclarative?linkDeclarativeModule(entry):linkDynamicModule(entry)}curGroupDeclarative=!curGroupDeclarative}}function getOrCreateModuleRecord(name){return moduleRecords[name]||(moduleRecords[name]={name:name,dependencies:[],exports:{},importers:[]})}function linkDeclarativeModule(entry){if(!entry.module){var module=entry.module=getOrCreateModuleRecord(entry.name),exports=entry.module.exports,declaration=entry.declare.call(global,function(name,value){if(module.locked=!0,"object"==typeof name)for(var p in name)exports[p]=name[p];else exports[name]=value;for(var i=0,l=module.importers.length;l>i;i++){var importerModule=module.importers[i];if(!importerModule.locked)for(var j=0;j<importerModule.dependencies.length;++j)importerModule.dependencies[j]===module&&importerModule.setters[j](exports)}return module.locked=!1,value},entry.name);module.setters=declaration.setters,module.execute=declaration.execute;for(var i=0,l=entry.normalizedDeps.length;l>i;i++){var depExports,depName=entry.normalizedDeps[i],depEntry=defined[depName],depModule=moduleRecords[depName];depModule?depExports=depModule.exports:depEntry&&!depEntry.declarative?depExports=depEntry.esModule:depEntry?(linkDeclarativeModule(depEntry),depModule=depEntry.module,depExports=depModule.exports):depExports=load(depName),depModule&&depModule.importers?(depModule.importers.push(module),module.dependencies.push(depModule)):module.dependencies.push(null),module.setters[i]&&module.setters[i](depExports)}}}function getModule(name){var exports,entry=defined[name];if(entry)entry.declarative?ensureEvaluated(name,[]):entry.evaluated||linkDynamicModule(entry),exports=entry.module.exports;else if(exports=load(name),!exports)throw new Error("Unable to load dependency "+name+".");return(!entry||entry.declarative)&&exports&&exports.__useDefault?exports["default"]:exports}function linkDynamicModule(entry){if(!entry.module){var exports={},module=entry.module={exports:exports,id:entry.name};if(!entry.executingRequire)for(var i=0,l=entry.normalizedDeps.length;l>i;i++){var depName=entry.normalizedDeps[i],depEntry=defined[depName];depEntry&&linkDynamicModule(depEntry)}entry.evaluated=!0;var output=entry.execute.call(global,function(name){for(var i=0,l=entry.deps.length;l>i;i++)if(entry.deps[i]==name)return getModule(entry.normalizedDeps[i]);throw new TypeError("Module "+name+" not declared as a dependency.")},exports,module);if(output&&(module.exports=output),exports=module.exports,exports&&exports.__esModule)entry.esModule=exports;else{if(entry.esModule={},("object"==typeof exports||"function"==typeof exports)&&exports!==global)if(getOwnPropertyDescriptor){var d;for(var p in exports)(d=Object.getOwnPropertyDescriptor(exports,p))&&defineProperty(entry.esModule,p,d)}else{var hasOwnProperty=exports&&exports.hasOwnProperty;for(var p in exports)hasOwnProperty&&!exports.hasOwnProperty(p)||(entry.esModule[p]=exports[p])}entry.esModule["default"]=exports,defineProperty(entry.esModule,"__useDefault",{value:!0})}}}function ensureEvaluated(moduleName,seen){var entry=defined[moduleName];if(entry&&!entry.evaluated&&entry.declarative){seen.push(moduleName);for(var i=0,l=entry.normalizedDeps.length;l>i;i++){var depName=entry.normalizedDeps[i];-1==indexOf.call(seen,depName)&&(defined[depName]?ensureEvaluated(depName,seen):load(depName))}entry.evaluated||(entry.evaluated=!0,entry.module.execute.call(global))}}function load(name){if(modules[name])return modules[name];if("@node/"==name.substr(0,6))return require(name.substr(6));var entry=defined[name];if(!entry)throw"Module "+name+" not present.";return link(name),ensureEvaluated(name,[]),defined[name]=void 0,entry.declarative&&defineProperty(entry.module.exports,"__esModule",{value:!0}),modules[name]=entry.declarative?entry.module.exports:entry.esModule}var defined={},indexOf=Array.prototype.indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(this[i]===item)return i;return-1},getOwnPropertyDescriptor=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(e){getOwnPropertyDescriptor=!1}var defineProperty;!function(){try{Object.defineProperty({},"a",{})&&(defineProperty=Object.defineProperty)}catch(e){defineProperty=function(obj,prop,opt){try{obj[prop]=opt.value||opt.get.call(obj)}catch(e){}}}}();var moduleRecords={},modules={};return function(mains,depNames,declare){return function(formatDetect){formatDetect(function(deps){var System={_nodeRequire:"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,register:register,registerDynamic:registerDynamic,get:load,set:function(name,module){modules[name]=module},newModule:function(module){return module}};System.set("@empty",{});for(var i=0;i<depNames.length;i++)(function(depName,dep){dep&&dep.__esModule?System.register(depName,[],function(_export){return{setters:[],execute:function(){for(var p in dep)"__esModule"==p||"object"==typeof p&&p+""=="Module"||_export(p,dep[p])}}}):System.registerDynamic(depName,[],!1,function(){return dep})})(depNames[i],arguments[i]);declare(System);var firstLoad=load(mains[0]);if(mains.length>1)for(var i=1;i<mains.length;i++)load(mains[i]);return firstLoad.__useDefault?firstLoad["default"]:firstLoad})}}}("undefined"!=typeof self?self:global)(["1"],[],function($__System){!function(__global){function readMemberExpression(p,value){for(var pParts=p.split(".");pParts.length;)value=value[pParts.shift()];return value}function forEachGlobal(callback){if(Object.keys)Object.keys(__global).forEach(callback);else for(var g in __global)hasOwnProperty.call(__global,g)&&callback(g)}function forEachGlobalValue(callback){forEachGlobal(function(globalName){if(-1==indexOf.call(ignoredGlobalProps,globalName)){try{var value=__global[globalName]}catch(e){ignoredGlobalProps.push(globalName)}callback(globalName,value)}})}var globalSnapshot,loader=$__System,hasOwnProperty=Object.prototype.hasOwnProperty,indexOf=Array.prototype.indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(this[i]===item)return i;return-1},ignoredGlobalProps=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB"];loader.set("@@global-helpers",loader.newModule({prepareGlobal:function(moduleName,exportName,globals){var curDefine=__global.define;__global.define=void 0,__global.exports=void 0,__global.module&&__global.module.exports&&(__global.module=void 0);var oldGlobals;if(globals){oldGlobals={};for(var g in globals)oldGlobals[g]=__global[g],__global[g]=globals[g]}return exportName||(globalSnapshot={},forEachGlobalValue(function(name,value){globalSnapshot[name]=value})),function(){var globalValue;if(exportName)globalValue=readMemberExpression(exportName,__global);else{var singleGlobal,multipleExports,exports={};forEachGlobalValue(function(name,value){globalSnapshot[name]!==value&&"undefined"!=typeof value&&(exports[name]=value,"undefined"!=typeof singleGlobal?multipleExports||singleGlobal===value||(multipleExports=!0):singleGlobal=value)}),globalValue=multipleExports?exports:singleGlobal}if(oldGlobals)for(var g in oldGlobals)__global[g]=oldGlobals[g];return __global.define=curDefine,globalValue}}}))}("undefined"!=typeof self?self:global),function(){var loader=$__System;if("undefined"!=typeof window&&"undefined"!=typeof document&&window.location)var windowOrigin=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");loader.set("@@cjs-helpers",loader.newModule({getPathVars:function(moduleId){var filename,pluginIndex=moduleId.lastIndexOf("!");filename=-1!=pluginIndex?moduleId.substr(0,pluginIndex):moduleId;var dirname=filename.split("/");return dirname.pop(),dirname=dirname.join("/"),"file:///"==filename.substr(0,8)?(filename=filename.substr(7),dirname=dirname.substr(7),isWindows&&(filename=filename.substr(1),dirname=dirname.substr(1))):windowOrigin&&filename.substr(0,windowOrigin.length)===windowOrigin&&(filename=filename.substr(windowOrigin.length),dirname=dirname.substr(windowOrigin.length)),{filename:filename,dirname:dirname}}}))}(),function(__global){function getCJSDeps(source,requireIndex){source=source.replace(commentRegEx,"");var params=source.match(fnBracketRegEx),requireAlias=(params[1].split(",")[requireIndex]||"require").replace(wsRegEx,""),requireRegEx=requireRegExs[requireAlias]||(requireRegExs[requireAlias]=new RegExp(cjsRequirePre+requireAlias+cjsRequirePost,"g"));requireRegEx.lastIndex=0;for(var match,deps=[];match=requireRegEx.exec(source);)deps.push(match[2]||match[3]);return deps}function require(names,callback,errback,referer){if("object"==typeof names&&!(names instanceof Array))return require.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof names&&"function"==typeof callback&&(names=[names]),!(names instanceof Array)){if("string"==typeof names){var module=loader.get(names);return module.__useDefault?module["default"]:module}throw new TypeError("Invalid require")}for(var dynamicRequires=[],i=0;i<names.length;i++)dynamicRequires.push(loader["import"](names[i],referer));Promise.all(dynamicRequires).then(function(modules){callback&&callback.apply(null,modules)},errback)}function define(name,deps,factory){"string"!=typeof name&&(factory=deps,deps=name,name=null),deps instanceof Array||(factory=deps,deps=["require","exports","module"].splice(0,factory.length)),"function"!=typeof factory&&(factory=function(factory){return function(){return factory}}(factory)),void 0===deps[deps.length-1]&&deps.pop();var requireIndex,exportsIndex,moduleIndex;-1!=(requireIndex=indexOf.call(deps,"require"))&&(deps.splice(requireIndex,1),name||(deps=deps.concat(getCJSDeps(factory.toString(),requireIndex)))),-1!=(exportsIndex=indexOf.call(deps,"exports"))&&deps.splice(exportsIndex,1),-1!=(moduleIndex=indexOf.call(deps,"module"))&&deps.splice(moduleIndex,1);var define={name:name,deps:deps,execute:function(req,exports,module){for(var depValues=[],i=0;i<deps.length;i++)depValues.push(req(deps[i]));module.uri=module.id,module.config=function(){},-1!=moduleIndex&&depValues.splice(moduleIndex,0,module),-1!=exportsIndex&&depValues.splice(exportsIndex,0,exports),-1!=requireIndex&&depValues.splice(requireIndex,0,function(names,callback,errback){return"string"==typeof names&&"function"!=typeof callback?req(names):require.call(loader,names,callback,errback,module.id)});var output=factory.apply(-1==exportsIndex?__global:exports,depValues);return"undefined"==typeof output&&module&&(output=module.exports),"undefined"!=typeof output?output:void 0}};if(name)lastModule.anonDefine||lastModule.isBundle?(lastModule.anonDefine&&lastModule.anonDefine.name&&loader.registerDynamic(lastModule.anonDefine.name,lastModule.anonDefine.deps,!1,lastModule.anonDefine.execute),lastModule.anonDefine=null):lastModule.anonDefine=define,lastModule.isBundle=!0,loader.registerDynamic(name,define.deps,!1,define.execute);else{if(lastModule.anonDefine)throw new TypeError("Multiple defines for anonymous module");lastModule.anonDefine=define}}function createDefine(loader){lastModule.anonDefine=null,lastModule.isBundle=!1;var oldModule=__global.module,oldExports=__global.exports,oldDefine=__global.define;return __global.module=void 0,__global.exports=void 0,__global.define=define,function(){__global.define=oldDefine,__global.module=oldModule,__global.exports=oldExports}}var loader=$__System,indexOf=Array.prototype.indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(this[i]===item)return i;return-1},commentRegEx=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequirePre="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",cjsRequirePost="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",fnBracketRegEx=/\(([^\)]*)\)/,wsRegEx=/^\s+|\s+$/g,requireRegExs={};define.amd={};var lastModule={isBundle:!1,anonDefine:null};loader.set("@@amd-helpers",loader.newModule({createDefine:createDefine,require:require,define:define,lastModule:lastModule})),loader.amdDefine=define,loader.amdRequire=require}("undefined"!=typeof self?self:global),$__System.registerDynamic("2",["3","4","5"],!0,function($__require,exports,module){"use strict";var global=this,__define=global.define;global.define=void 0;var environment=$__require("3"),emitter=$__require("4"),ConnexionEvent=$__require("5"),channel=exports,eventKey=ConnexionEvent.key,emitterEmit=emitter.emit,globalScope=environment.global,isNodeJs=environment.isNodeJs,connextionMessageRegExp=/^__([A-Za-z]+?)__:/,whenGuiReady=new Promise(function(resolve){if(globalScope.process)var timerId=setInterval(function(){if(globalScope.window){clearInterval(timerId);var gui=globalScope.window.nwDispatcher.requireNwGui();resolve(gui)}},10)});return channel.getAllChildWindows=function(topWin){for(var win,wins=[],frames=topWin.frames,i=frames.length;i--;)win=frames[i],wins.push(win),wins=wins.concat(channel.getAllChildWindows(win));return wins},channel.getCurrentNWWindow=function(){return whenGuiReady.then(function(gui){return gui.Window.get()})},channel.sendMessage=function(connexionMessage){var browserWindow=globalScope.window||{},location=browserWindow.location,origin=location&&(location.origin||location.protocol+"//"+location.host)||"*",browserFrames=browserWindow.top&&[browserWindow.top].concat(channel.getAllChildWindows(browserWindow.top))||[];origin="*",isNodeJs?channel.getCurrentNWWindow().then(function(nwWindow){browserFrames.forEach(function(win){nwWindow.eval(win.frameElement||null,"window.postMessage('"+connexionMessage+"', \""+origin+'");')})}):browserFrames.forEach(function(win){try{win.postMessage(connexionMessage,origin)}catch(err){console.error(err,connexionMessage)}})},channel.sendEvent=function(event){var connexionMessage=channel._createEvent(event);channel.sendMessage(connexionMessage)},channel.sendSetup=function(setup){var connexionMessage=channel._createSetup(setup);channel.sendMessage(connexionMessage)},channel.sendSetupResponse=function(setup){var connexionMessage=channel._createSetupResponse(setup);channel.sendMessage(connexionMessage)},channel.onMessage=function(handler,messageType,once){var browserWindow=globalScope.window;browserWindow&&browserWindow.addEventListener&&browserWindow.addEventListener("message",function onMessagePosted(e){var connectionCretaria,connectionType,connectionMatch,data,isMessageEventWorking=this.MessageEvent&&this.MessageEvent.length,event=isMessageEventWorking?new this.MessageEvent("message",e):e,message=event.data;message&&"string"==typeof message&&(connectionMatch=message.match(connextionMessageRegExp),connectionMatch&&(connectionCretaria=connectionMatch[0],connectionType=connectionMatch[1],connectionType===messageType&&(data=JSON.parse(message.substr(connectionCretaria.length))))),data&&("key"in data&&data.key!==eventKey||data.length&&data[0].event.key!==eventKey)&&(once&&this.removeEventListener("message",onMessagePosted,!1),handler(data))},!1),browserWindow=void 0},channel.onEvent=function(handler){return channel.onMessage(function(event){event&&event.key!==eventKey&&handler(event)},"connexionEvent")},channel.onSetup=function(handler){return channel.onMessage(handler,"connexionSetup")},channel.onceSetupResponse=function(handler){return channel.onMessage(handler,"connexionSetupResponse",!0)},channel.invokeEvent=function(event){return emitterEmit.call(emitter,event)},channel._createEvent=function(event){return"__connexionEvent__:"+JSON.stringify(event)},channel._createSetup=function(setupData){return"__connexionSetup__:"+JSON.stringify([{event:{key:eventKey}}])},channel._createSetupResponse=function(setupData){return"__connexionSetupResponse__:"+JSON.stringify(setupData)},channel.getStreamsData=function(){var eventStreams=emitter.subjects,eventTypes=Object.keys(eventStreams);return eventTypes.map(function(eventType){var stream=eventStreams[eventType];return{name:eventType,event:stream.value}})},channel.setStreamsData=function(streamsData){var eventStreams=emitter.subjects;streamsData.forEach(function(data){var stream,streamValue,name=data.name,event=data.event;name&&"*"!==name&&event.timeStamp&&(name in eventStreams?(stream=eventStreams[name],streamValue=stream.value,event.timeStamp>streamValue.timeStamp&&channel.invokeEvent(event)):channel.invokeEvent(event))})},channel.attachMessageHandlers=function(){channel.onEvent(channel.invokeEvent),channel.onSetup(function(setup){channel.sendSetupResponse(channel.getStreamsData()),channel.setStreamsData(setup)}),channel.onceSetupResponse(channel.setStreamsData)},channel.sendSetup(channel.getStreamsData()),emitter.emit=function(type,detail){var event=emitterEmit.call(emitter,type,detail);channel.sendEvent(event)},isNodeJs?channel.getCurrentNWWindow().then(function(win){win.on("loaded",function(){var browserWindow=globalScope.window;browserWindow.__ConnexionNodeChannel||(browserWindow.__ConnexionNodeChannel=!0,channel.attachMessageHandlers())})}):channel.attachMessageHandlers(),global.define=__define,module.exports}),$__System.registerDynamic("6",[],!0,function($__require,exports,module){"use strict";var global=this,__define=global.define;global.define=void 0;var implementation,createTask,Stack=[],ids={},idCounter=0,cancelTask=function(){};return"undefined"!=typeof Promise?(createTask=function(callback){new Promise(function(resolve,reject){implementation={reject:reject},resolve()}).then(callback)["catch"](function(err){console.error(err)})},cancelTask=function(){implementation.reject()}):(createTask=function(callback){implementation=setTimeout(callback,0)},cancelTask=function(){clearTimeout(implementation)}),exports.setAsyncTask=function(taskFunc){if("function"==typeof taskFunc){var id=idCounter++;return ids[id]=taskFunc,Stack.length?Stack.push(taskFunc):(Stack.push(taskFunc),createTask(function(){for(var task;Stack.length;)(task=Stack.shift())()})),id}},exports.clearAsyncTask=function(id){if("number"==typeof id&&id in ids&&Stack.length){for(var task,i=-1;++i in Stack;)task=Stack[i],task===ids[id]&&(Stack.splice(i,1),delete ids[id]);Stack.length||cancelTask()}},global.define=__define,module.exports}),$__System.registerDynamic("5",[],!0,function($__require,exports,module){"use strict";var global=this,__define=global.define;global.define=void 0;var ConnexionEvent=function(origin){this.emitter=origin&&origin.emitter||"",this.scope=origin&&origin.scope||"",this.isCanceled=!1,this.type=origin&&origin.type||"*",this.timeStamp=origin&&"timeStamp"in origin?origin.timeStamp:(new Date).getTime(),this.detail=origin&&origin.detail,this.detail=this.detail&&"object"==typeof this.detail?this.detail:{},this.key=ConnexionEvent.key};return ConnexionEvent.prototype.cancel=function(){this.isCanceled=!0},ConnexionEvent.key=Math.round(Math.random()*Math.pow(10,15)),module.exports=ConnexionEvent,global.define=__define,module.exports}),$__System.registerDynamic("3",[],!0,function($__require,exports,module){var global=this,__define=global.define;global.define=void 0;var $__pathVars=$__System.get("@@cjs-helpers").getPathVars(module.id),__dirname=($__pathVars.filename,$__pathVars.dirname);return function(self,nodeGlobal,browserWindow,undefined){"use strict";var window=self.window||browserWindow||{},document=window.document||{},location=window.location||{},global=nodeGlobal||("top"in window?window.top.global||{}:{}),isNodeJs="require"in global&&"process"in global&&"undefined"!=typeof __dirname&&global.global===global;"head"in document||(document.head=document.getElementsByTagName&&document.getElementsByTagName("head")[0]||document.documentElement),"createElement"in document&&(document.createElement("template"),document.createElement("content")),exports.window=window,exports.global=global,exports.location=location,exports.isNodeJs=isNodeJs,exports.undefined=undefined}(this,"undefined"!=typeof global?global:null,"undefined"!=typeof window?window:null),global.define=__define,module.exports}),function(){var _removeDefine=$__System.get("@@amd-helpers").createDefine();(function(undefined){function checkGlobal(value){return value&&value.Object===Object?value:null}function cloneArray(arr){for(var len=arr.length,a=new Array(len),i=0;len>i;i++)a[i]=arr[i];return a}function tryCatcherGen(tryCatchTarget){return function(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}}function thrower(e){throw e}function makeStackTraceLong(error,observable){if(hasStacks&&observable.stack&&"object"==typeof error&&null!==error&&error.stack&&-1===error.stack.indexOf(STACK_JUMP_SEPARATOR)){for(var stacks=[],o=observable;o;o=o.source)o.stack&&stacks.unshift(o.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0,len=lines.length;len>i;i++){var line=lines[i];isInternalFrame(line)||isNodeFrame(line)||!line||desiredLines.push(line)}return desiredLines.join("\n")}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===rFileName&&lineNumber>=rStartingLine&&rEndingLine>=lineNumber}function isNodeFrame(stackLine){return-1!==stackLine.indexOf("(module.js:")||-1!==stackLine.indexOf("(node.js:")}function captureLine(){if(hasStacks)try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return rFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);return attempt3?[attempt3[1],Number(attempt3[2])]:void 0}function equalObjects(object,other,equalFunc,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!==othLength&&!isLoose)return!1;for(var key,index=objLength;index--;)if(key=objProps[index],!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1;for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var result,objValue=object[key],othValue=other[key];if(!(result===undefined?equalFunc(objValue,othValue,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"===key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!==othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object===+other;case errorTag:return object.name===other.name&&object.message===other.message;case numberTag:return object!==+object?other!==+other:object===+other;case regexpTag:case stringTag:return object===other+""}return!1}function isObjectLike(value){return!!value&&"object"==typeof value}function isLength(value){return"number"==typeof value&&value>-1&&value%1===0&&MAX_SAFE_INTEGER>=value}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function equalArrays(array,other,equalFunc,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!==othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var result,arrValue=array[index],othValue=other[index];if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,isLoose,stackA,stackB))return!1}return!0}function baseIsEqualDeep(object,other,equalFunc,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag===argsTag?objTag=objectTag:objTag!==objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag===argsTag&&(othTag=objectTag));var objIsObj=objTag===objectTag&&!isHostObject(object),othIsObj=othTag===objectTag&&!isHostObject(other),isSameTag=objTag===othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]===object)return stackB[length]===other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsEqual(value,other,isLoose,stackA,stackB){return value===other?!0:null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,isLoose,stackA,stackB)}function arrayInitialize(count,factory){for(var a=new Array(count),i=0;count>i;i++)a[i]=factory();return a}function IndexedItem(id,value){this.id=id,this.value=value}function IsDisposedDisposable(state){this._s=state,this.isDisposed=!1}function StringIterable(s){this._s=s}function StringIterator(s){this._s=s,this._l=s.length,this._i=0}function ArrayIterable(a){this._a=a}function ArrayIterator(a){this._a=a,this._l=toLength(a),this._i=0}function numberIsFinite(value){return"number"==typeof value&&root.isFinite(value)}function getIterable(o){var it,i=o[$iterator$];if(!i&&"string"==typeof o)return it=new StringIterable(o),it[$iterator$]();if(!i&&o.length!==undefined)return it=new ArrayIterable(o),it[$iterator$]();if(!i)throw new TypeError("Object is not iterable");return o[$iterator$]()}function sign(value){var number=+value;return 0===number?number:isNaN(number)?number:0>number?-1:1}function toLength(o){var len=+o.length;return isNaN(len)?0:0!==len&&numberIsFinite(len)?(len=sign(len)*Math.floor(Math.abs(len)),0>=len?0:len>maxSafeInteger?maxSafeInteger:len):len}function observableOf(scheduler,array){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)}function RepeatSink(observer,parent){this.observer=observer,this.parent=parent}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];return args}function asObservable(source){return function(o){return source.subscribe(o)}}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function plucker(args,len){return function(x){for(var currentProp=x,i=0;len>i;i++){var p=currentProp[args[i]];if("undefined"==typeof p)return undefined;currentProp=p}return currentProp}}function createCbObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createCbHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createCbHandler(o,ctx,selector){return function(){for(var len=arguments.length,results=new Array(len),i=0;len>i;i++)results[i]=arguments[i];if(isFunction(selector)){if(results=tryCatch(selector).apply(ctx,results),results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function createNodeObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createNodeHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createNodeHandler(o,ctx,selector){return function(){var err=arguments[0];if(err)return o.onError(err);for(var len=arguments.length,results=[],i=1;len>i;i++)results[i-1]=arguments[i];if(isFunction(selector)){var results=tryCatch(selector).apply(ctx,results);if(results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function isNodeList(el){return root.StaticNodeList?el instanceof root.StaticNodeList||el instanceof root.NodeList:"[object NodeList]"===Object.prototype.toString.call(el)}function ListenDisposable(e,n,fn){this._e=e,this._n=n,this._fn=fn,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function createEventListener(el,eventName,handler){var disposables=new CompositeDisposable,elemToString=Object.prototype.toString.call(el);if(isNodeList(el)||"[object HTMLCollection]"===elemToString)for(var i=0,len=el.length;len>i;i++)disposables.add(createEventListener(el.item(i),eventName,handler));else el&&disposables.add(new ListenDisposable(el,eventName,handler));return disposables}function _observableTimer(dueTime,scheduler){return new TimerObservable(dueTime,scheduler)}function observableTimerDateAndPeriod(dueTime,period,scheduler){return new AnonymousObservable(function(observer){var d=dueTime,p=normalizeTime(period);return scheduler.scheduleRecursiveFuture(0,d,function(count,self){if(p>0){var now=scheduler.now();d=new Date(d.getTime()+p),d.getTime()<=now&&(d=new Date(now+p))}observer.onNext(count),self(count+1,new Date(d))})})}function observableTimerTimeSpanAndPeriod(dueTime,period,scheduler){return dueTime===period?new AnonymousObservable(function(observer){return scheduler.schedulePeriodic(0,period,function(count){return observer.onNext(count),count+1})}):observableDefer(function(){return observableTimerDateAndPeriod(new Date(scheduler.now()+dueTime),period,scheduler)})}function observableDelayRelative(source,dueTime,scheduler){
return new AnonymousObservable(function(o){var subscription,active=!1,cancelable=new SerialDisposable,exception=null,q=[],running=!1;return subscription=source.materialize().timestamp(scheduler).subscribe(function(notification){var d,shouldRun;"E"===notification.value.kind?(q=[],q.push(notification),exception=notification.value.error,shouldRun=!running):(q.push({value:notification.value,timestamp:notification.timestamp+dueTime}),shouldRun=!active,active=!0),shouldRun&&(null!==exception?o.onError(exception):(d=new SingleAssignmentDisposable,cancelable.setDisposable(d),d.setDisposable(scheduler.scheduleRecursiveFuture(null,dueTime,function(_,self){var e,recurseDueTime,result,shouldRecurse;if(null===exception){running=!0;do result=null,q.length>0&&q[0].timestamp-scheduler.now()<=0&&(result=q.shift().value),null!==result&&result.accept(o);while(null!==result);shouldRecurse=!1,recurseDueTime=0,q.length>0?(shouldRecurse=!0,recurseDueTime=Math.max(0,q[0].timestamp-scheduler.now())):active=!1,e=exception,running=!1,null!==e?o.onError(e):shouldRecurse&&self(null,recurseDueTime)}}))))}),new BinaryDisposable(subscription,cancelable)},source)}function observableDelayAbsolute(source,dueTime,scheduler){return observableDefer(function(){return observableDelayRelative(source,dueTime-scheduler.now(),scheduler)})}function delayWithSelector(source,subscriptionDelay,delayDurationSelector){var subDelay,selector;return isFunction(subscriptionDelay)?selector=subscriptionDelay:(subDelay=subscriptionDelay,selector=delayDurationSelector),new AnonymousObservable(function(o){function start(){subscription.setDisposable(source.subscribe(function(x){var delay=tryCatch(selector)(x);if(delay===errorObj)return o.onError(delay.e);var d=new SingleAssignmentDisposable;delays.add(d),d.setDisposable(delay.subscribe(function(){o.onNext(x),delays.remove(d),done()},function(e){o.onError(e)},function(){o.onNext(x),delays.remove(d),done()}))},function(e){o.onError(e)},function(){atEnd=!0,subscription.dispose(),done()}))}function done(){atEnd&&0===delays.length&&o.onCompleted()}var delays=new CompositeDisposable,atEnd=!1,subscription=new SerialDisposable;return subDelay?subscription.setDisposable(subDelay.subscribe(start,function(e){o.onError(e)},start)):start(),new BinaryDisposable(subscription,delays)},source)}function debounceWithSelector(source,durationSelector){return new AnonymousObservable(function(o){var value,hasValue=!1,cancelable=new SerialDisposable,id=0,subscription=source.subscribe(function(x){var throttle=tryCatch(durationSelector)(x);if(throttle===errorObj)return o.onError(throttle.e);isPromise(throttle)&&(throttle=observableFromPromise(throttle)),hasValue=!0,value=x,id++;var currentid=id,d=new SingleAssignmentDisposable;cancelable.setDisposable(d),d.setDisposable(throttle.subscribe(function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()},function(e){o.onError(e)},function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()}))},function(e){cancelable.dispose(),o.onError(e),hasValue=!1,id++},function(){cancelable.dispose(),hasValue&&o.onNext(value),o.onCompleted(),hasValue=!1,id++});return new BinaryDisposable(subscription,cancelable)},source)}function timeoutWithSelector(source,firstTimeout,timeoutDurationSelector,other){return isFunction(firstTimeout)&&(other=timeoutDurationSelector,timeoutDurationSelector=firstTimeout,firstTimeout=observableNever()),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function setTimer(timeout){function timerWins(){return switched=myId===id}var myId=id,d=new SingleAssignmentDisposable;timer.setDisposable(d),d.setDisposable(timeout.subscribe(function(){timerWins()&&subscription.setDisposable(other.subscribe(o)),d.dispose()},function(e){timerWins()&&o.onError(e)},function(){timerWins()&&subscription.setDisposable(other.subscribe(o))}))}function oWins(){var res=!switched;return res&&id++,res}var subscription=new SerialDisposable,timer=new SerialDisposable,original=new SingleAssignmentDisposable;subscription.setDisposable(original);var id=0,switched=!1;return setTimer(firstTimeout),original.setDisposable(source.subscribe(function(x){if(oWins()){o.onNext(x);var timeout=tryCatch(timeoutDurationSelector)(x);if(timeout===errorObj)return o.onError(timeout.e);setTimer(isPromise(timeout)?observableFromPromise(timeout):timeout)}},function(e){oWins()&&o.onError(e)},function(){oWins()&&o.onCompleted()})),new BinaryDisposable(subscription,timer)},source)}function timeout(source,dueTime,other,scheduler){return isScheduler(other)&&(scheduler=other,other=observableThrow(new TimeoutError)),other instanceof Error&&(other=observableThrow(other)),isScheduler(scheduler)||(scheduler=defaultScheduler),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function createTimer(){var myId=id;timer.setDisposable(scheduler.scheduleFuture(null,dueTime,function(){switched=id===myId,switched&&(isPromise(other)&&(other=observableFromPromise(other)),subscription.setDisposable(other.subscribe(o)))}))}var id=0,original=new SingleAssignmentDisposable,subscription=new SerialDisposable,switched=!1,timer=new SerialDisposable;return subscription.setDisposable(original),createTimer(),original.setDisposable(source.subscribe(function(x){switched||(id++,o.onNext(x),createTimer())},function(e){switched||(id++,o.onError(e))},function(){switched||(id++,o.onCompleted())})),new BinaryDisposable(subscription,timer)},source)}function combineLatestSource(source,subject,resultSelector){return new AnonymousObservable(function(o){function next(x,i){if(values[i]=x,hasValue[i]=!0,hasValueAll||(hasValueAll=hasValue.every(identity))){if(err)return o.onError(err);var res=tryCatch(resultSelector).apply(null,values);if(res===errorObj)return o.onError(res.e);o.onNext(res)}isDone&&values[1]&&o.onCompleted()}var err,hasValue=[!1,!1],hasValueAll=!1,isDone=!1,values=new Array(2);return new BinaryDisposable(source.subscribe(function(x){next(x,0)},function(e){values[1]?o.onError(e):err=e},function(){isDone=!0,values[1]&&o.onCompleted()}),subject.subscribe(function(x){next(x,1)},function(e){o.onError(e)},function(){isDone=!0,next(!0,1)}))},source)}function transformForObserver(o){return{"@@transducer/init":function(){return o},"@@transducer/step":function(obs,input){return obs.onNext(input)},"@@transducer/result":function(obs){return obs.onCompleted()}}}var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:null,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:null,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),moduleExports=freeModule&&freeModule.exports===freeExports?freeExports:null,thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),Rx={internals:{},config:{Promise:root.Promise},helpers:{}},noop=Rx.helpers.noop=function(){},identity=Rx.helpers.identity=function(x){return x},defaultNow=Rx.helpers.defaultNow=Date.now,defaultComparer=Rx.helpers.defaultComparer=function(x,y){return isEqual(x,y)},defaultSubComparer=Rx.helpers.defaultSubComparer=function(x,y){return x>y?1:y>x?-1:0},defaultError=(Rx.helpers.defaultKeySerializer=function(x){return x.toString()},Rx.helpers.defaultError=function(err){throw err}),isPromise=Rx.helpers.isPromise=function(p){return!!p&&"function"!=typeof p.subscribe&&"function"==typeof p.then},isFunction=Rx.helpers.isFunction=function(){var isFn=function(value){return"function"==typeof value||!1};return isFn(/x/)&&(isFn=function(value){return"function"==typeof value&&"[object Function]"==toString.call(value)}),isFn}(),errorObj={e:{}},tryCatch=Rx.internals.tryCatch=function(fn){if(!isFunction(fn))throw new TypeError("fn must be a function");return tryCatcherGen(fn)};Rx.config.longStackSupport=!1;var hasStacks=!1,stacks=tryCatch(function(){throw new Error})();hasStacks=!!stacks.e&&!!stacks.e.stack;var rFileName,rStartingLine=captureLine(),STACK_JUMP_SEPARATOR="From previous event:",EmptyError=Rx.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};EmptyError.prototype=Object.create(Error.prototype),EmptyError.prototype.name="EmptyError";var ObjectDisposedError=Rx.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ObjectDisposedError.prototype=Object.create(Error.prototype),ObjectDisposedError.prototype.name="ObjectDisposedError";var ArgumentOutOfRangeError=Rx.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};ArgumentOutOfRangeError.prototype=Object.create(Error.prototype),ArgumentOutOfRangeError.prototype.name="ArgumentOutOfRangeError";var NotSupportedError=Rx.NotSupportedError=function(message){this.message=message||"This operation is not supported",Error.call(this)};NotSupportedError.prototype=Object.create(Error.prototype),NotSupportedError.prototype.name="NotSupportedError";var NotImplementedError=Rx.NotImplementedError=function(message){this.message=message||"This operation is not implemented",Error.call(this)};NotImplementedError.prototype=Object.create(Error.prototype),NotImplementedError.prototype.name="NotImplementedError";var notImplemented=Rx.helpers.notImplemented=function(){throw new NotImplementedError},$iterator$=(Rx.helpers.notSupported=function(){throw new NotSupportedError},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");root.Set&&"function"==typeof(new root.Set)["@@iterator"]&&($iterator$="@@iterator");var doneEnumerator=Rx.doneEnumerator={done:!0,value:undefined},isIterable=Rx.helpers.isIterable=function(o){return o&&o[$iterator$]!==undefined},isArrayLike=Rx.helpers.isArrayLike=function(o){return o&&o.length!==undefined};Rx.helpers.iterator=$iterator$;var bindCallback=Rx.internals.bindCallback=function(func,thisArg,argCount){if("undefined"==typeof thisArg)return func;switch(argCount){case 0:return function(){return func.call(thisArg)};case 1:return function(arg){return func.call(thisArg,arg)};case 2:return function(value,index){return func.call(thisArg,value,index)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)}}return function(){return func.apply(thisArg,arguments)}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],argsTag=(dontEnums.length,"[object Arguments]"),arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,MAX_SAFE_INTEGER=Math.pow(2,53)-1,keys=Object.keys||function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("object"!=typeof obj&&("function"!=typeof obj||null===obj))throw new TypeError("Object.keys called on non-object");var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;dontEnumsLength>i;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}(),isObject=Rx.internals.isObject=function(value){var type=typeof value;return!!value&&("object"===type||"function"===type)},isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(value){return"function"!=typeof value.toString&&"string"==typeof(value+"")}}(),isArray=Array.isArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)===arrayTag},isEqual=Rx.internals.isEqual=function(value,other){return baseIsEqual(value,other)},inherits=({}.hasOwnProperty,Array.prototype.slice,Rx.internals.inherits=function(child,parent){function __(){this.constructor=child}__.prototype=parent.prototype,child.prototype=new __}),addProperties=Rx.internals.addProperties=function(obj){for(var sources=[],i=1,len=arguments.length;len>i;i++)sources.push(arguments[i]);for(var idx=0,ln=sources.length;ln>idx;idx++){var source=sources[idx];for(var prop in source)obj[prop]=source[prop]}},CompositeDisposable=(Rx.internals.addRef=function(xs,r){return new AnonymousObservable(function(observer){return new BinaryDisposable(r.getDisposable(),xs.subscribe(observer))})},Rx.CompositeDisposable=function(){var i,len,args=[];if(Array.isArray(arguments[0]))args=arguments[0];else for(len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];this.disposables=args,this.isDisposed=!1,this.length=args.length}),CompositeDisposablePrototype=CompositeDisposable.prototype;CompositeDisposablePrototype.add=function(item){this.isDisposed?item.dispose():(this.disposables.push(item),this.length++)},CompositeDisposablePrototype.remove=function(item){var shouldDispose=!1;if(!this.isDisposed){var idx=this.disposables.indexOf(item);-1!==idx&&(shouldDispose=!0,this.disposables.splice(idx,1),this.length--,item.dispose())}return shouldDispose},CompositeDisposablePrototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var len=this.disposables.length,currentDisposables=new Array(len),i=0;len>i;i++)currentDisposables[i]=this.disposables[i];for(this.disposables=[],this.length=0,i=0;len>i;i++)currentDisposables[i].dispose()}};var Disposable=Rx.Disposable=function(action){this.isDisposed=!1,this.action=action||noop};Disposable.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var disposableCreate=Disposable.create=function(action){return new Disposable(action)},disposableEmpty=Disposable.empty={dispose:noop},isDisposable=Disposable.isDisposable=function(d){return d&&isFunction(d.dispose)},checkDisposed=Disposable.checkDisposed=function(disposable){if(disposable.isDisposed)throw new ObjectDisposedError},disposableFixup=Disposable._fixup=function(result){return isDisposable(result)?result:disposableEmpty},SingleAssignmentDisposable=Rx.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};SingleAssignmentDisposable.prototype.getDisposable=function(){return this.current},SingleAssignmentDisposable.prototype.setDisposable=function(value){if(this.current)throw new Error("Disposable has already been assigned");var shouldDispose=this.isDisposed;!shouldDispose&&(this.current=value),shouldDispose&&value&&value.dispose()},SingleAssignmentDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null,old&&old.dispose()}};var SerialDisposable=Rx.SerialDisposable=function(){this.isDisposed=!1,this.current=null};SerialDisposable.prototype.getDisposable=function(){return this.current},SerialDisposable.prototype.setDisposable=function(value){var shouldDispose=this.isDisposed;if(!shouldDispose){var old=this.current;this.current=value}old&&old.dispose(),shouldDispose&&value&&value.dispose()},SerialDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null}old&&old.dispose()};var BinaryDisposable=Rx.BinaryDisposable=function(first,second){this._first=first,this._second=second,this.isDisposed=!1};BinaryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old1=this._first;this._first=null,old1&&old1.dispose();var old2=this._second;this._second=null,old2&&old2.dispose()}};var NAryDisposable=Rx.NAryDisposable=function(disposables){this._disposables=disposables,this.isDisposed=!1};NAryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var i=0,len=this._disposables.length;len>i;i++)this._disposables[i].dispose();this._disposables.length=0}};var ScheduledItem=(Rx.RefCountDisposable=function(){function InnerDisposable(disposable){this.disposable=disposable,this.disposable.count++,this.isInnerDisposed=!1}function RefCountDisposable(disposable){this.underlyingDisposable=disposable,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return InnerDisposable.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},RefCountDisposable.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},RefCountDisposable.prototype.getDisposable=function(){return this.isDisposed?disposableEmpty:new InnerDisposable(this)},RefCountDisposable}(),Rx.internals.ScheduledItem=function(scheduler,state,action,dueTime,comparer){this.scheduler=scheduler,this.state=state,this.action=action,this.dueTime=dueTime,this.comparer=comparer||defaultSubComparer,this.disposable=new SingleAssignmentDisposable});ScheduledItem.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},ScheduledItem.prototype.compareTo=function(other){return this.comparer(this.dueTime,other.dueTime)},ScheduledItem.prototype.isCancelled=function(){return this.disposable.isDisposed},ScheduledItem.prototype.invokeCore=function(){return disposableFixup(this.action(this.scheduler,this.state))};var Scheduler=Rx.Scheduler=function(){function Scheduler(){}Scheduler.isScheduler=function(s){return s instanceof Scheduler};var schedulerProto=Scheduler.prototype;return schedulerProto.schedule=function(state,action){throw new NotImplementedError},schedulerProto.scheduleFuture=function(state,dueTime,action){var dt=dueTime;return dt instanceof Date&&(dt-=this.now()),dt=Scheduler.normalize(dt),0===dt?this.schedule(state,action):this._scheduleFuture(state,dt,action)},schedulerProto._scheduleFuture=function(state,dueTime,action){throw new NotImplementedError},Scheduler.now=defaultNow,Scheduler.prototype.now=defaultNow,Scheduler.normalize=function(timeSpan){return 0>timeSpan&&(timeSpan=0),timeSpan},Scheduler}(),normalizeTime=Scheduler.normalize,isScheduler=Scheduler.isScheduler;!function(schedulerProto){function invokeRecImmediate(scheduler,pair){function innerAction(state2){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.schedule(state2,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}function invokeRecDate(scheduler,pair){function innerAction(state2,dueTime1){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.scheduleFuture(state2,dueTime1,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}schedulerProto.scheduleRecursive=function(state,action){return this.schedule([state,action],invokeRecImmediate)},schedulerProto.scheduleRecursiveFuture=function(state,dueTime,action){return this.scheduleFuture([state,action],dueTime,invokeRecDate)}}(Scheduler.prototype),function(schedulerProto){schedulerProto.schedulePeriodic=function(state,period,action){if("undefined"==typeof root.setInterval)throw new NotSupportedError;period=normalizeTime(period);var s=state,id=root.setInterval(function(){s=action(s)},period);return disposableCreate(function(){root.clearInterval(id)})}}(Scheduler.prototype);var scheduleMethod,clearMethod,ImmediateScheduler=function(__super__){function ImmediateScheduler(){__super__.call(this)}return inherits(ImmediateScheduler,__super__),ImmediateScheduler.prototype.schedule=function(state,action){return disposableFixup(action(this,state))},ImmediateScheduler}(Scheduler),immediateScheduler=Scheduler.immediate=new ImmediateScheduler,CurrentThreadScheduler=function(__super__){function runTrampoline(){for(;queue.length>0;){var item=queue.dequeue();!item.isCancelled()&&item.invoke()}}function CurrentThreadScheduler(){__super__.call(this)}var queue;return inherits(CurrentThreadScheduler,__super__),CurrentThreadScheduler.prototype.schedule=function(state,action){var si=new ScheduledItem(this,state,action,this.now());if(queue)queue.enqueue(si);else{queue=new PriorityQueue(4),queue.enqueue(si);var result=tryCatch(runTrampoline)();queue=null,result===errorObj&&thrower(result.e)}return si.disposable},CurrentThreadScheduler.prototype.scheduleRequired=function(){return!queue},CurrentThreadScheduler}(Scheduler),currentThreadScheduler=Scheduler.currentThread=new CurrentThreadScheduler,localTimer=(Rx.internals.SchedulePeriodicRecursive=function(){function createTick(self){return function(command,recurse){recurse(0,self._period);var state=tryCatch(self._action)(self._state);state===errorObj&&(self._cancel.dispose(),thrower(state.e)),self._state=state}}function SchedulePeriodicRecursive(scheduler,state,period,action){this._scheduler=scheduler,this._state=state,this._period=period,this._action=action}return SchedulePeriodicRecursive.prototype.start=function(){var d=new SingleAssignmentDisposable;return this._cancel=d,d.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,createTick(this))),d},SchedulePeriodicRecursive}(),function(){var localSetTimeout,localClearTimeout=noop;if(root.setTimeout)localSetTimeout=root.setTimeout,localClearTimeout=root.clearTimeout;else{if(!root.WScript)throw new NotSupportedError;localSetTimeout=function(fn,time){root.WScript.Sleep(time),fn()}}return{setTimeout:localSetTimeout,clearTimeout:localClearTimeout}}()),localSetTimeout=localTimer.setTimeout,localClearTimeout=localTimer.clearTimeout;!function(){function runTask(handle){if(currentlyRunning)localSetTimeout(function(){runTask(handle)},0);else{var task=tasksByHandle[handle];if(task){currentlyRunning=!0;var result=tryCatch(task)();clearMethod(handle),currentlyRunning=!1,result===errorObj&&thrower(result.e)}}}function postMessageSupported(){if(!root.postMessage||root.importScripts)return!1;var isAsync=!1,oldHandler=root.onmessage;return root.onmessage=function(){isAsync=!0},root.postMessage("","*"),root.onmessage=oldHandler,isAsync}var nextHandle=1,tasksByHandle={},currentlyRunning=!1;clearMethod=function(handle){delete tasksByHandle[handle]};var reNative=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),setImmediate="function"==typeof(setImmediate=freeGlobal&&moduleExports&&freeGlobal.setImmediate)&&!reNative.test(setImmediate)&&setImmediate;if(isFunction(setImmediate))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,setImmediate(function(){runTask(id)}),id};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,process.nextTick(function(){runTask(id)}),id};else if(postMessageSupported()){var MSG_PREFIX="ms.rx.schedule"+Math.random(),onGlobalPostMessage=function(event){"string"==typeof event.data&&event.data.substring(0,MSG_PREFIX.length)===MSG_PREFIX&&runTask(event.data.substring(MSG_PREFIX.length))};root.addEventListener("message",onGlobalPostMessage,!1),scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,root.postMessage(MSG_PREFIX+id,"*"),id}}else if(root.MessageChannel){var channel=new root.MessageChannel;channel.port1.onmessage=function(e){runTask(e.data)},scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,channel.port2.postMessage(id),id}}else scheduleMethod="document"in root&&"onreadystatechange"in root.document.createElement("script")?function(action){var scriptElement=root.document.createElement("script"),id=nextHandle++;return tasksByHandle[id]=action,scriptElement.onreadystatechange=function(){runTask(id),scriptElement.onreadystatechange=null,scriptElement.parentNode.removeChild(scriptElement),scriptElement=null},root.document.documentElement.appendChild(scriptElement),id}:function(action){var id=nextHandle++;return tasksByHandle[id]=action,localSetTimeout(function(){runTask(id)},0),id}}();var DefaultScheduler=function(__super__){function DefaultScheduler(){__super__.call(this)}function scheduleAction(disposable,action,scheduler,state){return function(){disposable.setDisposable(Disposable._fixup(action(scheduler,state)))}}function ClearDisposable(id){this._id=id,this.isDisposed=!1}function LocalClearDisposable(id){this._id=id,this.isDisposed=!1}return inherits(DefaultScheduler,__super__),ClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,clearMethod(this._id))},LocalClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,localClearTimeout(this._id))},DefaultScheduler.prototype.schedule=function(state,action){var disposable=new SingleAssignmentDisposable,id=scheduleMethod(scheduleAction(disposable,action,this,state));return new BinaryDisposable(disposable,new ClearDisposable(id))},DefaultScheduler.prototype._scheduleFuture=function(state,dueTime,action){if(0===dueTime)return this.schedule(state,action);var disposable=new SingleAssignmentDisposable,id=localSetTimeout(scheduleAction(disposable,action,this,state),dueTime);return new BinaryDisposable(disposable,new LocalClearDisposable(id))},DefaultScheduler}(Scheduler),defaultScheduler=Scheduler["default"]=Scheduler.async=new DefaultScheduler;IndexedItem.prototype.compareTo=function(other){var c=this.value.compareTo(other.value);return 0===c&&(c=this.id-other.id),c};var PriorityQueue=Rx.internals.PriorityQueue=function(capacity){this.items=new Array(capacity),this.length=0},priorityProto=PriorityQueue.prototype;priorityProto.isHigherPriority=function(left,right){return this.items[left].compareTo(this.items[right])<0},priorityProto.percolate=function(index){if(!(index>=this.length||0>index)){var parent=index-1>>1;if(!(0>parent||parent===index)&&this.isHigherPriority(index,parent)){var temp=this.items[index];this.items[index]=this.items[parent],this.items[parent]=temp,this.percolate(parent)}}},priorityProto.heapify=function(index){if(+index||(index=0),!(index>=this.length||0>index)){var left=2*index+1,right=2*index+2,first=index;if(left<this.length&&this.isHigherPriority(left,first)&&(first=left),right<this.length&&this.isHigherPriority(right,first)&&(first=right),first!==index){var temp=this.items[index];this.items[index]=this.items[first],this.items[first]=temp,this.heapify(first)}}},priorityProto.peek=function(){return this.items[0].value},priorityProto.removeAt=function(index){this.items[index]=this.items[--this.length],this.items[this.length]=undefined,this.heapify()},priorityProto.dequeue=function(){var result=this.peek();return this.removeAt(0),result},priorityProto.enqueue=function(item){var index=this.length++;this.items[index]=new IndexedItem(PriorityQueue.count++,item),this.percolate(index)},priorityProto.remove=function(item){for(var i=0;i<this.length;i++)if(this.items[i].value===item)return this.removeAt(i),!0;return!1},PriorityQueue.count=0;var observableProto,Notification=Rx.Notification=function(){function Notification(){}return Notification.prototype._accept=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype._acceptObserver=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype.accept=function(observerOrOnNext,onError,onCompleted){return observerOrOnNext&&"object"==typeof observerOrOnNext?this._acceptObserver(observerOrOnNext):this._accept(observerOrOnNext,onError,onCompleted)},Notification.prototype.toObservable=function(scheduler){var self=this;return isScheduler(scheduler)||(scheduler=immediateScheduler),new AnonymousObservable(function(o){return scheduler.schedule(self,function(_,notification){notification._acceptObserver(o),"N"===notification.kind&&o.onCompleted()})})},Notification}(),OnNextNotification=function(__super__){function OnNextNotification(value){this.value=value,this.kind="N"}return inherits(OnNextNotification,__super__),OnNextNotification.prototype._accept=function(onNext){return onNext(this.value)},OnNextNotification.prototype._acceptObserver=function(o){return o.onNext(this.value)},OnNextNotification.prototype.toString=function(){return"OnNext("+this.value+")"},OnNextNotification}(Notification),OnErrorNotification=function(__super__){function OnErrorNotification(error){this.error=error,this.kind="E"}return inherits(OnErrorNotification,__super__),OnErrorNotification.prototype._accept=function(onNext,onError){return onError(this.error)},OnErrorNotification.prototype._acceptObserver=function(o){return o.onError(this.error)},OnErrorNotification.prototype.toString=function(){return"OnError("+this.error+")"},OnErrorNotification}(Notification),OnCompletedNotification=function(__super__){function OnCompletedNotification(){this.kind="C"}return inherits(OnCompletedNotification,__super__),OnCompletedNotification.prototype._accept=function(onNext,onError,onCompleted){return onCompleted()},OnCompletedNotification.prototype._acceptObserver=function(o){return o.onCompleted()},OnCompletedNotification.prototype.toString=function(){return"OnCompleted()"},OnCompletedNotification}(Notification),notificationCreateOnNext=Notification.createOnNext=function(value){return new OnNextNotification(value)},notificationCreateOnError=Notification.createOnError=function(error){return new OnErrorNotification(error)},notificationCreateOnCompleted=Notification.createOnCompleted=function(){return new OnCompletedNotification},Observer=Rx.Observer=function(){},observerCreate=Observer.create=function(onNext,onError,onCompleted){return onNext||(onNext=noop),onError||(onError=defaultError),onCompleted||(onCompleted=noop),new AnonymousObserver(onNext,onError,onCompleted)},AbstractObserver=Rx.internals.AbstractObserver=function(__super__){function AbstractObserver(){this.isStopped=!1}return inherits(AbstractObserver,__super__),AbstractObserver.prototype.next=notImplemented,AbstractObserver.prototype.error=notImplemented,AbstractObserver.prototype.completed=notImplemented,AbstractObserver.prototype.onNext=function(value){!this.isStopped&&this.next(value)},AbstractObserver.prototype.onError=function(error){this.isStopped||(this.isStopped=!0,this.error(error))},AbstractObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},AbstractObserver.prototype.dispose=function(){this.isStopped=!0;
},AbstractObserver.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.error(e),!0)},AbstractObserver}(Observer),AnonymousObserver=Rx.AnonymousObserver=function(__super__){function AnonymousObserver(onNext,onError,onCompleted){__super__.call(this),this._onNext=onNext,this._onError=onError,this._onCompleted=onCompleted}return inherits(AnonymousObserver,__super__),AnonymousObserver.prototype.next=function(value){this._onNext(value)},AnonymousObserver.prototype.error=function(error){this._onError(error)},AnonymousObserver.prototype.completed=function(){this._onCompleted()},AnonymousObserver}(AbstractObserver),Observable=Rx.Observable=function(){function makeSubscribe(self,subscribe){return function(o){var oldOnError=o.onError;return o.onError=function(e){makeStackTraceLong(e,self),oldOnError.call(o,e)},subscribe.call(self,o)}}function Observable(){if(Rx.config.longStackSupport&&hasStacks){var oldSubscribe=this._subscribe,e=tryCatch(thrower)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=makeSubscribe(this,oldSubscribe)}}return observableProto=Observable.prototype,Observable.isObservable=function(o){return o&&isFunction(o.subscribe)},observableProto.subscribe=observableProto.forEach=function(oOrOnNext,onError,onCompleted){return this._subscribe("object"==typeof oOrOnNext?oOrOnNext:observerCreate(oOrOnNext,onError,onCompleted))},observableProto.subscribeOnNext=function(onNext,thisArg){return this._subscribe(observerCreate("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext))},observableProto.subscribeOnError=function(onError,thisArg){return this._subscribe(observerCreate(null,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError))},observableProto.subscribeOnCompleted=function(onCompleted,thisArg){return this._subscribe(observerCreate(null,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted))},Observable}(),ScheduledObserver=Rx.internals.ScheduledObserver=function(__super__){function ScheduledObserver(scheduler,observer){__super__.call(this),this.scheduler=scheduler,this.observer=observer,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new SerialDisposable}function enqueueNext(observer,x){return function(){observer.onNext(x)}}function enqueueError(observer,e){return function(){observer.onError(e)}}function enqueueCompleted(observer){return function(){observer.onCompleted()}}function scheduleMethod(state,recurse){var work;if(!(state.queue.length>0))return void(state.isAcquired=!1);work=state.queue.shift();var res=tryCatch(work)();return res===errorObj?(state.queue=[],state.hasFaulted=!0,thrower(res.e)):void recurse(state)}return inherits(ScheduledObserver,__super__),ScheduledObserver.prototype.next=function(x){this.queue.push(enqueueNext(this.observer,x))},ScheduledObserver.prototype.error=function(e){this.queue.push(enqueueError(this.observer,e))},ScheduledObserver.prototype.completed=function(){this.queue.push(enqueueCompleted(this.observer))},ScheduledObserver.prototype.ensureActive=function(){var isOwner=!1;!this.hasFaulted&&this.queue.length>0&&(isOwner=!this.isAcquired,this.isAcquired=!0),isOwner&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,scheduleMethod))},ScheduledObserver.prototype.dispose=function(){__super__.prototype.dispose.call(this),this.disposable.dispose()},ScheduledObserver}(AbstractObserver),ObservableBase=Rx.ObservableBase=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.subscribeCore).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function ObservableBase(){__super__.call(this)}return inherits(ObservableBase,__super__),ObservableBase.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},ObservableBase.prototype.subscribeCore=notImplemented,ObservableBase}(Observable),FlatMapObservable=Rx.FlatMapObservable=function(__super__){function FlatMapObservable(source,selector,resultSelector,thisArg){this.resultSelector=isFunction(resultSelector)?resultSelector:null,this.selector=bindCallback(isFunction(selector)?selector:function(){return selector},thisArg,3),this.source=source,__super__.call(this)}function InnerObserver(observer,selector,resultSelector,source){this.i=0,this.selector=selector,this.resultSelector=resultSelector,this.source=source,this.o=observer,AbstractObserver.call(this)}return inherits(FlatMapObservable,__super__),FlatMapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this.resultSelector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype._wrapResult=function(result,x,i){return this.resultSelector?result.map(function(y,i2){return this.resultSelector(x,y,i,i2)},this):result},InnerObserver.prototype.next=function(x){var i=this.i++,result=tryCatch(this.selector)(x,i,this.source);return result===errorObj?this.o.onError(result.e):(isPromise(result)&&(result=observableFromPromise(result)),(isArrayLike(result)||isIterable(result))&&(result=Observable.from(result)),void this.o.onNext(this._wrapResult(result,x,i)))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FlatMapObservable}(ObservableBase),Enumerable=Rx.internals.Enumerable=function(){};IsDisposedDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var ConcatEnumerableObservable=function(__super__){function ConcatEnumerableObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,AbstractObserver.call(this)}return inherits(ConcatEnumerableObservable,__super__),ConcatEnumerableObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,o:o,subscription:subscription,e:this.sources[$iterator$]()},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.o.onError(e)},InnerObserver.prototype.completed=function(){this._recurse(this._state)},ConcatEnumerableObservable}(ObservableBase);Enumerable.prototype.concat=function(){return new ConcatEnumerableObservable(this)};var CatchErrorObservable=function(__super__){function CatchErrorObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return null!==state.lastError?state.o.onError(state.lastError):state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,AbstractObserver.call(this)}return inherits(CatchErrorObservable,__super__),CatchErrorObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,e:this.sources[$iterator$](),subscription:subscription,lastError:null,o:o},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.lastError=e,this._recurse(this._state)},InnerObserver.prototype.completed=function(){this._state.o.onCompleted()},CatchErrorObservable}(ObservableBase);Enumerable.prototype.catchError=function(){return new CatchErrorObservable(this)};var RepeatEnumerable=function(__super__){function RepeatEnumerable(v,c){this.v=v,this.c=null==c?-1:c}function RepeatEnumerator(p){this.v=p.v,this.l=p.c}return inherits(RepeatEnumerable,__super__),RepeatEnumerable.prototype[$iterator$]=function(){return new RepeatEnumerator(this)},RepeatEnumerator.prototype.next=function(){return 0===this.l?doneEnumerator:(this.l>0&&this.l--,{done:!1,value:this.v})},RepeatEnumerable}(Enumerable),enumerableRepeat=Enumerable.repeat=function(value,repeatCount){return new RepeatEnumerable(value,repeatCount)},OfEnumerable=function(__super__){function OfEnumerable(s,fn,thisArg){this.s=s,this.fn=fn?bindCallback(fn,thisArg,3):null}function OfEnumerator(p){this.i=-1,this.s=p.s,this.l=this.s.length,this.fn=p.fn}return inherits(OfEnumerable,__super__),OfEnumerable.prototype[$iterator$]=function(){return new OfEnumerator(this)},OfEnumerator.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:doneEnumerator},OfEnumerable}(Enumerable),enumerableOf=Enumerable.of=function(source,selector,thisArg){return new OfEnumerable(source,selector,thisArg)},ToArrayObservable=function(__super__){function ToArrayObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.a=[],AbstractObserver.call(this)}return inherits(ToArrayObservable,__super__),ToArrayObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.a.push(x)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},ToArrayObservable}(ObservableBase);observableProto.toArray=function(){return new ToArrayObservable(this)},Observable.create=function(subscribe,parent){return new AnonymousObservable(subscribe,parent)};var Defer=function(__super__){function Defer(factory){this._f=factory,__super__.call(this)}return inherits(Defer,__super__),Defer.prototype.subscribeCore=function(o){var result=tryCatch(this._f)();return result===errorObj?observableThrow(result.e).subscribe(o):(isPromise(result)&&(result=observableFromPromise(result)),result.subscribe(o))},Defer}(ObservableBase),observableDefer=Observable.defer=function(observableFactory){return new Defer(observableFactory)},EmptyObservable=function(__super__){function EmptyObservable(scheduler){this.scheduler=scheduler,__super__.call(this)}function EmptySink(observer,scheduler){this.observer=observer,this.scheduler=scheduler}function scheduleItem(s,state){return state.onCompleted(),disposableEmpty}return inherits(EmptyObservable,__super__),EmptyObservable.prototype.subscribeCore=function(observer){var sink=new EmptySink(observer,this.scheduler);return sink.run()},EmptySink.prototype.run=function(){var state=this.observer;return this.scheduler===immediateScheduler?scheduleItem(null,state):this.scheduler.schedule(state,scheduleItem)},EmptyObservable}(ObservableBase),EMPTY_OBSERVABLE=new EmptyObservable(immediateScheduler),observableEmpty=Observable.empty=function(scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),scheduler===immediateScheduler?EMPTY_OBSERVABLE:new EmptyObservable(scheduler)},FromObservable=function(__super__){function FromObservable(iterable,fn,scheduler){this._iterable=iterable,this._fn=fn,this._scheduler=scheduler,__super__.call(this)}function createScheduleMethod(o,it,fn){return function(i,recurse){var next=tryCatch(it.next).call(it);if(next===errorObj)return o.onError(next.e);if(next.done)return o.onCompleted();var result=next.value;return isFunction(fn)&&(result=tryCatch(fn)(result,i),result===errorObj)?o.onError(result.e):(o.onNext(result),void recurse(i+1))}}return inherits(FromObservable,__super__),FromObservable.prototype.subscribeCore=function(o){var list=Object(this._iterable),it=getIterable(list);return this._scheduler.scheduleRecursive(0,createScheduleMethod(o,it,this._fn))},FromObservable}(ObservableBase),maxSafeInteger=Math.pow(2,53)-1;StringIterable.prototype[$iterator$]=function(){return new StringIterator(this._s)},StringIterator.prototype[$iterator$]=function(){return this},StringIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:doneEnumerator},ArrayIterable.prototype[$iterator$]=function(){return new ArrayIterator(this._a)},ArrayIterator.prototype[$iterator$]=function(){return this},ArrayIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:doneEnumerator};var observableFrom=Observable.from=function(iterable,mapFn,thisArg,scheduler){if(null==iterable)throw new Error("iterable cannot be null.");if(mapFn&&!isFunction(mapFn))throw new Error("mapFn when provided must be a function");if(mapFn)var mapper=bindCallback(mapFn,thisArg,2);return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromObservable(iterable,mapper,scheduler)},FromArrayObservable=function(__super__){function FromArrayObservable(args,scheduler){this._args=args,this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,args){var len=args.length;return function(i,recurse){len>i?(o.onNext(args[i]),recurse(i+1)):o.onCompleted()}}return inherits(FromArrayObservable,__super__),FromArrayObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._args))},FromArrayObservable}(ObservableBase),observableFromArray=Observable.fromArray=function(array,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)},NeverObservable=function(__super__){function NeverObservable(){__super__.call(this)}return inherits(NeverObservable,__super__),NeverObservable.prototype.subscribeCore=function(observer){return disposableEmpty},NeverObservable}(ObservableBase),NEVER_OBSERVABLE=new NeverObservable,observableNever=Observable.never=function(){return NEVER_OBSERVABLE};Observable.of=function(){for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];return new FromArrayObservable(args,currentThreadScheduler)},Observable.ofWithScheduler=function(scheduler){for(var len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];return new FromArrayObservable(args,scheduler)};var PairsObservable=function(__super__){function PairsObservable(o,scheduler){this._o=o,this._keys=Object.keys(o),this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,obj,keys){return function(i,recurse){if(i<keys.length){var key=keys[i];o.onNext([key,obj[key]]),recurse(i+1)}else o.onCompleted()}}return inherits(PairsObservable,__super__),PairsObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._o,this._keys))},PairsObservable}(ObservableBase);Observable.pairs=function(obj,scheduler){return scheduler||(scheduler=currentThreadScheduler),new PairsObservable(obj,scheduler)};var RangeObservable=function(__super__){function RangeObservable(start,count,scheduler){this.start=start,this.rangeCount=count,this.scheduler=scheduler,__super__.call(this)}function loopRecursive(start,count,o){return function(i,recurse){count>i?(o.onNext(start+i),recurse(i+1)):o.onCompleted()}}return inherits(RangeObservable,__super__),RangeObservable.prototype.subscribeCore=function(o){return this.scheduler.scheduleRecursive(0,loopRecursive(this.start,this.rangeCount,o))},RangeObservable}(ObservableBase);Observable.range=function(start,count,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RangeObservable(start,count,scheduler)};var RepeatObservable=function(__super__){function RepeatObservable(value,repeatCount,scheduler){this.value=value,this.repeatCount=null==repeatCount?-1:repeatCount,this.scheduler=scheduler,__super__.call(this)}return inherits(RepeatObservable,__super__),RepeatObservable.prototype.subscribeCore=function(observer){var sink=new RepeatSink(observer,this);return sink.run()},RepeatObservable}(ObservableBase);RepeatSink.prototype.run=function(){function loopRecursive(i,recurse){return(-1===i||i>0)&&(observer.onNext(value),i>0&&i--),0===i?observer.onCompleted():void recurse(i)}var observer=this.observer,value=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,loopRecursive)},Observable.repeat=function(value,repeatCount,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RepeatObservable(value,repeatCount,scheduler)};var JustObservable=function(__super__){function JustObservable(value,scheduler){this._value=value,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var value=state[0],observer=state[1];return observer.onNext(value),observer.onCompleted(),disposableEmpty}return inherits(JustObservable,__super__),JustObservable.prototype.subscribeCore=function(o){var state=[this._value,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},JustObservable}(ObservableBase),ThrowObservable=(Observable["return"]=Observable.just=function(value,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new JustObservable(value,scheduler)},function(__super__){function ThrowObservable(error,scheduler){this._error=error,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var e=state[0],o=state[1];return o.onError(e),disposableEmpty}return inherits(ThrowObservable,__super__),ThrowObservable.prototype.subscribeCore=function(o){var state=[this._error,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},ThrowObservable}(ObservableBase)),observableThrow=Observable["throw"]=function(error,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new ThrowObservable(error,scheduler)},CatchObservable=function(__super__){function CatchObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(CatchObservable,__super__),CatchObservable.prototype.subscribeCore=function(o){var d1=new SingleAssignmentDisposable,subscription=new SerialDisposable;return subscription.setDisposable(d1),d1.setDisposable(this.source.subscribe(new CatchObserver(o,subscription,this._fn))),subscription},CatchObservable}(ObservableBase),CatchObserver=function(__super__){function CatchObserver(o,s,fn){this._o=o,this._s=s,this._fn=fn,__super__.call(this)}return inherits(CatchObserver,__super__),CatchObserver.prototype.next=function(x){this._o.onNext(x)},CatchObserver.prototype.completed=function(){return this._o.onCompleted()},CatchObserver.prototype.error=function(e){var result=tryCatch(this._fn)(e);if(result===errorObj)return this._o.onError(result.e);isPromise(result)&&(result=observableFromPromise(result));var d=new SingleAssignmentDisposable;this._s.setDisposable(d),d.setDisposable(result.subscribe(this._o))},CatchObserver}(AbstractObserver);observableProto["catch"]=function(handlerOrSecond){return isFunction(handlerOrSecond)?new CatchObservable(this,handlerOrSecond):observableCatch([this,handlerOrSecond])};var observableCatch=Observable["catch"]=function(){var items;if(Array.isArray(arguments[0]))items=arguments[0];else{var len=arguments.length;items=new Array(len);for(var i=0;len>i;i++)items[i]=arguments[i]}return enumerableOf(items).catchError()};observableProto.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];return Array.isArray(args[0])?args[0].unshift(this):args.unshift(this),combineLatest.apply(this,args)};var CombineLatestObservable=function(__super__){function CombineLatestObservable(params,cb){this._params=params,this._cb=cb,__super__.call(this)}return inherits(CombineLatestObservable,__super__),CombineLatestObservable.prototype.subscribeCore=function(observer){for(var len=this._params.length,subscriptions=new Array(len),state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,isDone:arrayInitialize(len,falseFactory),values:new Array(len)},i=0;len>i;i++){var source=this._params[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new CombineLatestObserver(observer,i,this._cb,state)))}return new NAryDisposable(subscriptions)},CombineLatestObservable}(ObservableBase),CombineLatestObserver=function(__super__){function CombineLatestObserver(o,i,cb,state){this._o=o,this._i=i,this._cb=cb,this._state=state,__super__.call(this)}function notTheSame(i){return function(x,j){return j!==i}}return inherits(CombineLatestObserver,__super__),CombineLatestObserver.prototype.next=function(x){if(this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(identity))){var res=tryCatch(this._cb).apply(null,this._state.values);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._state.isDone.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},CombineLatestObserver.prototype.error=function(e){this._o.onError(e)},CombineLatestObserver.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(identity)&&this._o.onCompleted()},CombineLatestObserver}(AbstractObserver),combineLatest=Observable.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new CombineLatestObservable(args,resultSelector)};observableProto.concat=function(){for(var args=[],i=0,len=arguments.length;len>i;i++)args.push(arguments[i]);return args.unshift(this),observableConcat.apply(null,args)};var ConcatObserver=function(__super__){function ConcatObserver(s,fn){this._s=s,this._fn=fn,__super__.call(this)}return inherits(ConcatObserver,__super__),ConcatObserver.prototype.next=function(x){this._s.o.onNext(x)},ConcatObserver.prototype.error=function(e){this._s.o.onError(e)},ConcatObserver.prototype.completed=function(){this._s.i++,this._fn(this._s)},ConcatObserver}(AbstractObserver),ConcatObservable=function(__super__){function ConcatObservable(sources){this._sources=sources,__super__.call(this)}function scheduleRecursive(state,recurse){if(!state.disposable.isDisposed){if(state.i===state.sources.length)return state.o.onCompleted();var currentValue=state.sources[state.i];isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new ConcatObserver(state,recurse)))}}return inherits(ConcatObservable,__super__),ConcatObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,disposable=disposableCreate(noop),state={o:o,i:0,subscription:subscription,disposable:disposable,sources:this._sources},cancelable=immediateScheduler.scheduleRecursive(state,scheduleRecursive);return new NAryDisposable([subscription,disposable,cancelable])},ConcatObservable}(ObservableBase),observableConcat=Observable.concat=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(arguments.length);for(var i=0,len=arguments.length;len>i;i++)args[i]=arguments[i]}return new ConcatObservable(args)};observableProto.concatAll=function(){return this.merge(1)};var MergeObservable=function(__super__){function MergeObservable(source,maxConcurrent){this.source=source,this.maxConcurrent=maxConcurrent,__super__.call(this)}return inherits(MergeObservable,__super__),MergeObservable.prototype.subscribeCore=function(observer){var g=new CompositeDisposable;return g.add(this.source.subscribe(new MergeObserver(observer,this.maxConcurrent,g))),g},MergeObservable}(ObservableBase),MergeObserver=function(__super__){function MergeObserver(o,max,g){this.o=o,this.max=max,this.g=g,this.done=!1,this.q=[],this.activeCount=0,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeObserver,__super__),MergeObserver.prototype.handleSubscribe=function(xs){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(xs)&&(xs=observableFromPromise(xs)),sad.setDisposable(xs.subscribe(new InnerObserver(this,sad)))},MergeObserver.prototype.next=function(innerSource){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(innerSource)):this.q.push(innerSource)},MergeObserver.prototype.error=function(e){this.o.onError(e)},MergeObserver.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},MergeObserver}(AbstractObserver);observableProto.merge=function(maxConcurrentOrOther){return"number"!=typeof maxConcurrentOrOther?observableMerge(this,maxConcurrentOrOther):new MergeObservable(this,maxConcurrentOrOther)};var observableMerge=Observable.merge=function(){var scheduler,i,sources=[],len=arguments.length;if(arguments[0])if(isScheduler(arguments[0]))for(scheduler=arguments[0],i=1;len>i;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=0;len>i;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=1;len>i;i++)sources.push(arguments[i]);return Array.isArray(sources[0])&&(sources=sources[0]),observableOf(scheduler,sources).mergeAll()},CompositeError=Rx.CompositeError=function(errors){this.innerErrors=errors,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};CompositeError.prototype=Object.create(Error.prototype),CompositeError.prototype.name="CompositeError";var MergeDelayErrorObservable=function(__super__){function MergeDelayErrorObservable(source){this.source=source,__super__.call(this)}return inherits(MergeDelayErrorObservable,__super__),MergeDelayErrorObservable.prototype.subscribeCore=function(o){var group=new CompositeDisposable,m=new SingleAssignmentDisposable,state={isStopped:!1,errors:[],o:o};return group.add(m),m.setDisposable(this.source.subscribe(new MergeDelayErrorObserver(group,state))),group},MergeDelayErrorObservable}(ObservableBase),MergeDelayErrorObserver=function(__super__){function MergeDelayErrorObserver(group,state){this._group=group,this._state=state,__super__.call(this)}function setCompletion(o,errors){0===errors.length?o.onCompleted():1===errors.length?o.onError(errors[0]):o.onError(new CompositeError(errors))}function InnerObserver(inner,group,state){this._inner=inner,this._group=group,this._state=state,__super__.call(this)}return inherits(MergeDelayErrorObserver,__super__),MergeDelayErrorObserver.prototype.next=function(x){var inner=new SingleAssignmentDisposable;this._group.add(inner),isPromise(x)&&(x=observableFromPromise(x)),inner.setDisposable(x.subscribe(new InnerObserver(inner,this._group,this._state)))},MergeDelayErrorObserver.prototype.error=function(e){this._state.errors.push(e),this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.errors.push(e),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},InnerObserver.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver}(AbstractObserver);Observable.mergeDelayError=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{var len=arguments.length;args=new Array(len);for(var i=0;len>i;i++)args[i]=arguments[i]}var source=observableOf(null,args);return new MergeDelayErrorObservable(source)};var MergeAllObservable=function(__super__){function MergeAllObservable(source){this.source=source,__super__.call(this)}return inherits(MergeAllObservable,__super__),MergeAllObservable.prototype.subscribeCore=function(o){var g=new CompositeDisposable,m=new SingleAssignmentDisposable;return g.add(m),m.setDisposable(this.source.subscribe(new MergeAllObserver(o,g))),g},MergeAllObservable}(ObservableBase),MergeAllObserver=function(__super__){function MergeAllObserver(o,g){this.o=o,this.g=g,this.done=!1,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeAllObserver,__super__),MergeAllObserver.prototype.next=function(innerSource){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),sad.setDisposable(innerSource.subscribe(new InnerObserver(this,sad)))},MergeAllObserver.prototype.error=function(e){this.o.onError(e)},MergeAllObserver.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},MergeAllObserver}(AbstractObserver);observableProto.mergeAll=function(){return new MergeAllObservable(this)};var SkipUntilObservable=function(__super__){function SkipUntilObservable(source,other){this._s=source,this._o=isPromise(other)?observableFromPromise(other):other,this._open=!1,__super__.call(this)}return inherits(SkipUntilObservable,__super__),SkipUntilObservable.prototype.subscribeCore=function(o){var leftSubscription=new SingleAssignmentDisposable;leftSubscription.setDisposable(this._s.subscribe(new SkipUntilSourceObserver(o,this))),isPromise(this._o)&&(this._o=observableFromPromise(this._o));var rightSubscription=new SingleAssignmentDisposable;return rightSubscription.setDisposable(this._o.subscribe(new SkipUntilOtherObserver(o,this,rightSubscription))),new BinaryDisposable(leftSubscription,rightSubscription)},SkipUntilObservable}(ObservableBase),SkipUntilSourceObserver=function(__super__){function SkipUntilSourceObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipUntilSourceObserver,__super__),SkipUntilSourceObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipUntilSourceObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilSourceObserver.prototype.onCompleted=function(){
this._p._open&&this._o.onCompleted()},SkipUntilSourceObserver}(AbstractObserver),SkipUntilOtherObserver=function(__super__){function SkipUntilOtherObserver(o,p,r){this._o=o,this._p=p,this._r=r,__super__.call(this)}return inherits(SkipUntilOtherObserver,__super__),SkipUntilOtherObserver.prototype.next=function(){this._p._open=!0,this._r.dispose()},SkipUntilOtherObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilOtherObserver.prototype.onCompleted=function(){this._r.dispose()},SkipUntilOtherObserver}(AbstractObserver);observableProto.skipUntil=function(other){return new SkipUntilObservable(this,other)};var SwitchObservable=function(__super__){function SwitchObservable(source){this.source=source,__super__.call(this)}function SwitchObserver(o,inner){this.o=o,this.inner=inner,this.stopped=!1,this.latest=0,this.hasLatest=!1,AbstractObserver.call(this)}function InnerObserver(parent,id){this.parent=parent,this.id=id,AbstractObserver.call(this)}return inherits(SwitchObservable,__super__),SwitchObservable.prototype.subscribeCore=function(o){var inner=new SerialDisposable,s=this.source.subscribe(new SwitchObserver(o,inner));return new BinaryDisposable(s,inner)},inherits(SwitchObserver,AbstractObserver),SwitchObserver.prototype.next=function(innerSource){var d=new SingleAssignmentDisposable,id=++this.latest;this.hasLatest=!0,this.inner.setDisposable(d),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),d.setDisposable(innerSource.subscribe(new InnerObserver(this,id)))},SwitchObserver.prototype.error=function(e){this.o.onError(e)},SwitchObserver.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.parent.latest===this.id&&this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.latest===this.id&&this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},SwitchObservable}(ObservableBase);observableProto["switch"]=observableProto.switchLatest=function(){return new SwitchObservable(this)};var TakeUntilObservable=function(__super__){function TakeUntilObservable(source,other){this.source=source,this.other=isPromise(other)?observableFromPromise(other):other,__super__.call(this)}return inherits(TakeUntilObservable,__super__),TakeUntilObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this.source.subscribe(o),this.other.subscribe(new TakeUntilObserver(o)))},TakeUntilObservable}(ObservableBase),TakeUntilObserver=function(__super__){function TakeUntilObserver(o){this._o=o,__super__.call(this)}return inherits(TakeUntilObserver,__super__),TakeUntilObserver.prototype.next=function(){this._o.onCompleted()},TakeUntilObserver.prototype.error=function(err){this._o.onError(err)},TakeUntilObserver.prototype.onCompleted=noop,TakeUntilObserver}(AbstractObserver);observableProto.takeUntil=function(other){return new TakeUntilObservable(this,other)};var WithLatestFromObservable=function(__super__){function WithLatestFromObservable(source,sources,resultSelector){this._s=source,this._ss=sources,this._cb=resultSelector,__super__.call(this)}return inherits(WithLatestFromObservable,__super__),WithLatestFromObservable.prototype.subscribeCore=function(o){for(var len=this._ss.length,state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,values:new Array(len)},n=this._ss.length,subscriptions=new Array(n+1),i=0;n>i;i++){var other=this._ss[i],sad=new SingleAssignmentDisposable;isPromise(other)&&(other=observableFromPromise(other)),sad.setDisposable(other.subscribe(new WithLatestFromOtherObserver(o,i,state))),subscriptions[i]=sad}var outerSad=new SingleAssignmentDisposable;return outerSad.setDisposable(this._s.subscribe(new WithLatestFromSourceObserver(o,this._cb,state))),subscriptions[n]=outerSad,new NAryDisposable(subscriptions)},WithLatestFromObservable}(ObservableBase),WithLatestFromOtherObserver=function(__super__){function WithLatestFromOtherObserver(o,i,state){this._o=o,this._i=i,this._state=state,__super__.call(this)}return inherits(WithLatestFromOtherObserver,__super__),WithLatestFromOtherObserver.prototype.next=function(x){this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(identity)},WithLatestFromOtherObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromOtherObserver.prototype.completed=noop,WithLatestFromOtherObserver}(AbstractObserver),WithLatestFromSourceObserver=function(__super__){function WithLatestFromSourceObserver(o,cb,state){this._o=o,this._cb=cb,this._state=state,__super__.call(this)}return inherits(WithLatestFromSourceObserver,__super__),WithLatestFromSourceObserver.prototype.next=function(x){var allValues=[x].concat(this._state.values);if(this._state.hasValueAll){var res=tryCatch(this._cb).apply(null,allValues);return res===errorObj?this._o.onError(res.e):void this._o.onNext(res)}},WithLatestFromSourceObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromSourceObserver.prototype.completed=function(){this._o.onCompleted()},WithLatestFromSourceObserver}(AbstractObserver);observableProto.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new WithLatestFromObservable(this,args,resultSelector)};var ZipObservable=function(__super__){function ZipObservable(sources,resultSelector){this._s=sources,this._cb=resultSelector,__super__.call(this)}return inherits(ZipObservable,__super__),ZipObservable.prototype.subscribeCore=function(observer){for(var n=this._s.length,subscriptions=new Array(n),done=arrayInitialize(n,falseFactory),q=arrayInitialize(n,emptyArrayFactory),i=0;n>i;i++){var source=this._s[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new ZipObserver(observer,i,this,q,done)))}return new NAryDisposable(subscriptions)},ZipObservable}(ObservableBase),ZipObserver=function(__super__){function ZipObserver(o,i,p,q,d){this._o=o,this._i=i,this._p=p,this._q=q,this._d=d,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipObserver,__super__),ZipObserver.prototype.next=function(x){if(this._q[this._i].push(x),this._q.every(notEmpty)){var queuedValues=this._q.map(shiftEach),res=tryCatch(this._p._cb).apply(null,queuedValues);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._d.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},ZipObserver.prototype.error=function(e){this._o.onError(e)},ZipObserver.prototype.completed=function(){this._d[this._i]=!0,this._d.every(identity)&&this._o.onCompleted()},ZipObserver}(AbstractObserver);observableProto.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;Array.isArray(args[0])&&(args=args[0]);var parent=this;return args.unshift(parent),new ZipObservable(args,resultSelector)},Observable.zip=function(){for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];Array.isArray(args[0])&&(args=isFunction(args[1])?args[0].concat(args[1]):args[0]);var first=args.shift();return first.zip.apply(first,args)};var ZipIterableObservable=function(__super__){function ZipIterableObservable(sources,cb){this.sources=sources,this._cb=cb,__super__.call(this)}return inherits(ZipIterableObservable,__super__),ZipIterableObservable.prototype.subscribeCore=function(o){for(var sources=this.sources,len=sources.length,subscriptions=new Array(len),state={q:arrayInitialize(len,emptyArrayFactory),done:arrayInitialize(len,falseFactory),cb:this._cb,o:o},i=0;len>i;i++)!function(i){var source=sources[i],sad=new SingleAssignmentDisposable;(isArrayLike(source)||isIterable(source))&&(source=observableFrom(source)),subscriptions[i]=sad,sad.setDisposable(source.subscribe(new ZipIterableObserver(state,i)))}(i);return new NAryDisposable(subscriptions)},ZipIterableObservable}(ObservableBase),ZipIterableObserver=function(__super__){function ZipIterableObserver(s,i){this._s=s,this._i=i,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipIterableObserver,__super__),ZipIterableObserver.prototype.next=function(x){if(this._s.q[this._i].push(x),this._s.q.every(notEmpty)){var queuedValues=this._s.q.map(shiftEach),res=tryCatch(this._s.cb).apply(null,queuedValues);if(res===errorObj)return this._s.o.onError(res.e);this._s.o.onNext(res)}else this._s.done.filter(notTheSame(this._i)).every(identity)&&this._s.o.onCompleted()},ZipIterableObserver.prototype.error=function(e){this._s.o.onError(e)},ZipIterableObserver.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(identity)&&this._s.o.onCompleted()},ZipIterableObserver}(AbstractObserver);observableProto.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray,parent=this;return args.unshift(parent),new ZipIterableObservable(args,resultSelector)},observableProto.asObservable=function(){return new AnonymousObservable(asObservable(this),this)};var DematerializeObservable=function(__super__){function DematerializeObservable(source){this.source=source,__super__.call(this)}return inherits(DematerializeObservable,__super__),DematerializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DematerializeObserver(o))},DematerializeObservable}(ObservableBase),DematerializeObserver=function(__super__){function DematerializeObserver(o){this._o=o,__super__.call(this)}return inherits(DematerializeObserver,__super__),DematerializeObserver.prototype.next=function(x){x.accept(this._o)},DematerializeObserver.prototype.error=function(e){this._o.onError(e)},DematerializeObserver.prototype.completed=function(){this._o.onCompleted()},DematerializeObserver}(AbstractObserver);observableProto.dematerialize=function(){return new DematerializeObservable(this)};var DistinctUntilChangedObservable=function(__super__){function DistinctUntilChangedObservable(source,keyFn,comparer){this.source=source,this.keyFn=keyFn,this.comparer=comparer,__super__.call(this)}return inherits(DistinctUntilChangedObservable,__super__),DistinctUntilChangedObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DistinctUntilChangedObserver(o,this.keyFn,this.comparer))},DistinctUntilChangedObservable}(ObservableBase),DistinctUntilChangedObserver=function(__super__){function DistinctUntilChangedObserver(o,keyFn,comparer){this.o=o,this.keyFn=keyFn,this.comparer=comparer,this.hasCurrentKey=!1,this.currentKey=null,__super__.call(this)}return inherits(DistinctUntilChangedObserver,__super__),DistinctUntilChangedObserver.prototype.next=function(x){var comparerEquals,key=x;return isFunction(this.keyFn)&&(key=tryCatch(this.keyFn)(x),key===errorObj)?this.o.onError(key.e):this.hasCurrentKey&&(comparerEquals=tryCatch(this.comparer)(this.currentKey,key),comparerEquals===errorObj)?this.o.onError(comparerEquals.e):void(this.hasCurrentKey&&comparerEquals||(this.hasCurrentKey=!0,this.currentKey=key,this.o.onNext(x)))},DistinctUntilChangedObserver.prototype.error=function(e){this.o.onError(e)},DistinctUntilChangedObserver.prototype.completed=function(){this.o.onCompleted()},DistinctUntilChangedObserver}(AbstractObserver);observableProto.distinctUntilChanged=function(keyFn,comparer){return comparer||(comparer=defaultComparer),new DistinctUntilChangedObservable(this,keyFn,comparer)};var TapObservable=function(__super__){function TapObservable(source,observerOrOnNext,onError,onCompleted){this.source=source,this._oN=observerOrOnNext,this._oE=onError,this._oC=onCompleted,__super__.call(this)}function InnerObserver(o,p){this.o=o,this.t=!p._oN||isFunction(p._oN)?observerCreate(p._oN||noop,p._oE||noop,p._oC||noop):p._oN,this.isStopped=!1,AbstractObserver.call(this)}return inherits(TapObservable,__super__),TapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var res=tryCatch(this.t.onNext).call(this.t,x);res===errorObj&&this.o.onError(res.e),this.o.onNext(x)},InnerObserver.prototype.error=function(err){var res=tryCatch(this.t.onError).call(this.t,err);return res===errorObj?this.o.onError(res.e):void this.o.onError(err)},InnerObserver.prototype.completed=function(){var res=tryCatch(this.t.onCompleted).call(this.t);return res===errorObj?this.o.onError(res.e):void this.o.onCompleted()},TapObservable}(ObservableBase);observableProto["do"]=observableProto.tap=observableProto.doAction=function(observerOrOnNext,onError,onCompleted){return new TapObservable(this,observerOrOnNext,onError,onCompleted)},observableProto.doOnNext=observableProto.tapOnNext=function(onNext,thisArg){return this.tap("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext)},observableProto.doOnError=observableProto.tapOnError=function(onError,thisArg){return this.tap(noop,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError)},observableProto.doOnCompleted=observableProto.tapOnCompleted=function(onCompleted,thisArg){return this.tap(noop,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted)};var FinallyObservable=function(__super__){function FinallyObservable(source,fn,thisArg){this.source=source,this._fn=bindCallback(fn,thisArg,0),__super__.call(this)}function FinallyDisposable(s,fn){this.isDisposed=!1,this._s=s,this._fn=fn}return inherits(FinallyObservable,__super__),FinallyObservable.prototype.subscribeCore=function(o){var d=tryCatch(this.source.subscribe).call(this.source,o);return d===errorObj&&(this._fn(),thrower(d.e)),new FinallyDisposable(d,this._fn)},FinallyDisposable.prototype.dispose=function(){if(!this.isDisposed){var res=tryCatch(this._s.dispose).call(this._s);this._fn(),res===errorObj&&thrower(res.e)}},FinallyObservable}(ObservableBase);observableProto["finally"]=function(action,thisArg){return new FinallyObservable(this,action,thisArg)};var IgnoreElementsObservable=function(__super__){function IgnoreElementsObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.isStopped=!1}return inherits(IgnoreElementsObservable,__super__),IgnoreElementsObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},InnerObserver.prototype.onNext=noop,InnerObserver.prototype.onError=function(err){this.isStopped||(this.isStopped=!0,this.o.onError(err))},InnerObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},InnerObserver.prototype.dispose=function(){this.isStopped=!0},InnerObserver.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(e),!0)},IgnoreElementsObservable}(ObservableBase);observableProto.ignoreElements=function(){return new IgnoreElementsObservable(this)};var MaterializeObservable=function(__super__){function MaterializeObservable(source,fn){this.source=source,__super__.call(this)}return inherits(MaterializeObservable,__super__),MaterializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new MaterializeObserver(o))},MaterializeObservable}(ObservableBase),MaterializeObserver=function(__super__){function MaterializeObserver(o){this._o=o,__super__.call(this)}return inherits(MaterializeObserver,__super__),MaterializeObserver.prototype.next=function(x){this._o.onNext(notificationCreateOnNext(x))},MaterializeObserver.prototype.error=function(e){this._o.onNext(notificationCreateOnError(e)),this._o.onCompleted()},MaterializeObserver.prototype.completed=function(){this._o.onNext(notificationCreateOnCompleted()),this._o.onCompleted()},MaterializeObserver}(AbstractObserver);observableProto.materialize=function(){return new MaterializeObservable(this)},observableProto.repeat=function(repeatCount){return enumerableRepeat(this,repeatCount).concat()},observableProto.retry=function(retryCount){return enumerableRepeat(this,retryCount).catchError()};var RetryWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RetryWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RetryWhenObservable,__super__),RetryWhenObservable.prototype.subscribeCore=function(o){var lastError,exceptions=new Subject,notifier=new Subject,handled=this._notifier(exceptions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),exceptions.onNext(exn),outer.dispose()},function(){o.onCompleted()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RetryWhenObservable}(ObservableBase);observableProto.retryWhen=function(notifier){return new RetryWhenObservable(repeat(this),notifier)};var RepeatWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RepeatWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RepeatWhenObservable,__super__),RepeatWhenObservable.prototype.subscribeCore=function(o){var lastError,completions=new Subject,notifier=new Subject,handled=this._notifier(completions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){o.onError(exn)},function(){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),completions.onNext(null),outer.dispose()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RepeatWhenObservable}(ObservableBase);observableProto.repeatWhen=function(notifier){return new RepeatWhenObservable(repeat(this),notifier)};var ScanObservable=function(__super__){function ScanObservable(source,accumulator,hasSeed,seed){this.source=source,this.accumulator=accumulator,this.hasSeed=hasSeed,this.seed=seed,__super__.call(this)}return inherits(ScanObservable,__super__),ScanObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ScanObserver(o,this))},ScanObservable}(ObservableBase),ScanObserver=function(__super__){function ScanObserver(o,parent){this._o=o,this._p=parent,this._fn=parent.accumulator,this._hs=parent.hasSeed,this._s=parent.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,__super__.call(this)}return inherits(ScanObserver,__super__),ScanObserver.prototype.next=function(x){return!this._hv&&(this._hv=!0),this._ha?this._a=tryCatch(this._fn)(this._a,x,this._i,this._p):(this._a=this._hs?tryCatch(this._fn)(this._s,x,this._i,this._p):x,this._ha=!0),this._a===errorObj?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},ScanObserver.prototype.error=function(e){this._o.onError(e)},ScanObserver.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},ScanObserver}(AbstractObserver);observableProto.scan=function(){var seed,hasSeed=!1,accumulator=arguments[0];return 2===arguments.length&&(hasSeed=!0,seed=arguments[1]),new ScanObservable(this,accumulator,hasSeed,seed)};var SkipLastObservable=function(__super__){function SkipLastObservable(source,c){this.source=source,this._c=c,__super__.call(this)}return inherits(SkipLastObservable,__super__),SkipLastObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipLastObserver(o,this._c))},SkipLastObservable}(ObservableBase),SkipLastObserver=function(__super__){function SkipLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(SkipLastObserver,__super__),SkipLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._o.onNext(this._q.shift())},SkipLastObserver.prototype.error=function(e){this._o.onError(e)},SkipLastObserver.prototype.completed=function(){this._o.onCompleted()},SkipLastObserver}(AbstractObserver);observableProto.skipLast=function(count){if(0>count)throw new ArgumentOutOfRangeError;return new SkipLastObservable(this,count)},observableProto.startWith=function(){var scheduler,start=0;arguments.length&&isScheduler(arguments[0])?(scheduler=arguments[0],start=1):scheduler=immediateScheduler;for(var args=[],i=start,len=arguments.length;len>i;i++)args.push(arguments[i]);return enumerableOf([observableFromArray(args,scheduler),this]).concat()};var TakeLastObserver=function(__super__){function TakeLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(TakeLastObserver,__super__),TakeLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._q.shift()},TakeLastObserver.prototype.error=function(e){this._o.onError(e)},TakeLastObserver.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},TakeLastObserver}(AbstractObserver);observableProto.takeLast=function(count){if(0>count)throw new ArgumentOutOfRangeError;var source=this;return new AnonymousObservable(function(o){return source.subscribe(new TakeLastObserver(o,count))},source)},observableProto.flatMapConcat=observableProto.concatMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).merge(1)};var MapObservable=function(__super__){function MapObservable(source,selector,thisArg){this.source=source,this.selector=bindCallback(selector,thisArg,3),__super__.call(this)}function innerMap(selector,self){return function(x,i,o){return selector.call(this,self.selector(x,i,o),i,o)}}function InnerObserver(o,selector,source){this.o=o,this.selector=selector,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(MapObservable,__super__),MapObservable.prototype.internalMap=function(selector,thisArg){return new MapObservable(this.source,innerMap(selector,this),thisArg)},MapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var result=tryCatch(this.selector)(x,this.i++,this.source);return result===errorObj?this.o.onError(result.e):void this.o.onNext(result)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},MapObservable}(ObservableBase);observableProto.map=observableProto.select=function(selector,thisArg){var selectorFn="function"==typeof selector?selector:function(){return selector};return this instanceof MapObservable?this.internalMap(selectorFn,thisArg):new MapObservable(this,selectorFn,thisArg)},observableProto.pluck=function(){var len=arguments.length,args=new Array(len);if(0===len)throw new Error("List of properties cannot be empty.");for(var i=0;len>i;i++)args[i]=arguments[i];return this.map(plucker(args,len))},observableProto.flatMap=observableProto.selectMany=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).mergeAll()},Rx.Observable.prototype.flatMapLatest=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).switchLatest()};var SkipObservable=function(__super__){function SkipObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function SkipObserver(o,c){this._o=o,this._r=c,AbstractObserver.call(this)}return inherits(SkipObservable,__super__),SkipObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipObserver(o,this._count))},inherits(SkipObserver,AbstractObserver),SkipObserver.prototype.next=function(x){this._r<=0?this._o.onNext(x):this._r--},SkipObserver.prototype.error=function(e){this._o.onError(e)},SkipObserver.prototype.completed=function(){this._o.onCompleted()},SkipObservable}(ObservableBase);observableProto.skip=function(count){if(0>count)throw new ArgumentOutOfRangeError;return new SkipObservable(this,count)};var SkipWhileObservable=function(__super__){function SkipWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SkipWhileObservable,__super__),SkipWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipWhileObserver(o,this))},SkipWhileObservable}(ObservableBase),SkipWhileObserver=function(__super__){function SkipWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!1,__super__.call(this)}return inherits(SkipWhileObserver,__super__),SkipWhileObserver.prototype.next=function(x){if(!this._r){var res=tryCatch(this._p._fn)(x,this._i++,this._p);if(res===errorObj)return this._o.onError(res.e);this._r=!res}this._r&&this._o.onNext(x)},SkipWhileObserver.prototype.error=function(e){this._o.onError(e)},SkipWhileObserver.prototype.completed=function(){this._o.onCompleted()},SkipWhileObserver}(AbstractObserver);observableProto.skipWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new SkipWhileObservable(this,fn)};var TakeObservable=function(__super__){function TakeObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function TakeObserver(o,c){this._o=o,this._c=c,this._r=c,AbstractObserver.call(this)}return inherits(TakeObservable,__super__),TakeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeObserver(o,this._count))},inherits(TakeObserver,AbstractObserver),TakeObserver.prototype.next=function(x){this._r-- >0&&(this._o.onNext(x),this._r<=0&&this._o.onCompleted())},TakeObserver.prototype.error=function(e){this._o.onError(e)},TakeObserver.prototype.completed=function(){this._o.onCompleted()},TakeObservable}(ObservableBase);observableProto.take=function(count,scheduler){if(0>count)throw new ArgumentOutOfRangeError;return 0===count?observableEmpty(scheduler):new TakeObservable(this,count)};var TakeWhileObservable=function(__super__){function TakeWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(TakeWhileObservable,__super__),TakeWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeWhileObserver(o,this))},TakeWhileObservable}(ObservableBase),TakeWhileObserver=function(__super__){function TakeWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!0,__super__.call(this)}return inherits(TakeWhileObserver,__super__),TakeWhileObserver.prototype.next=function(x){return this._r&&(this._r=tryCatch(this._p._fn)(x,this._i++,this._p),this._r===errorObj)?this._o.onError(this._r.e):void(this._r?this._o.onNext(x):this._o.onCompleted())},TakeWhileObserver.prototype.error=function(e){this._o.onError(e)},TakeWhileObserver.prototype.completed=function(){this._o.onCompleted()},TakeWhileObserver}(AbstractObserver);observableProto.takeWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new TakeWhileObservable(this,fn)};var FilterObservable=function(__super__){function FilterObservable(source,predicate,thisArg){this.source=source,this.predicate=bindCallback(predicate,thisArg,3),__super__.call(this)}function innerPredicate(predicate,self){return function(x,i,o){return self.predicate(x,i,o)&&predicate.call(this,x,i,o)}}function InnerObserver(o,predicate,source){this.o=o,this.predicate=predicate,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(FilterObservable,__super__),FilterObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.predicate,this))},FilterObservable.prototype.internalFilter=function(predicate,thisArg){return new FilterObservable(this.source,innerPredicate(predicate,this),thisArg)},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var shouldYield=tryCatch(this.predicate)(x,this.i++,this.source);return shouldYield===errorObj?this.o.onError(shouldYield.e):void(shouldYield&&this.o.onNext(x))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FilterObservable}(ObservableBase);observableProto.filter=observableProto.where=function(predicate,thisArg){return this instanceof FilterObservable?this.internalFilter(predicate,thisArg):new FilterObservable(this,predicate,thisArg)},Observable.fromCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];return createCbObservable(fn,ctx,selector,args)}},Observable.fromNodeCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;len>i;i++)args[i]=arguments[i];return createNodeObservable(fn,ctx,selector,args)}},ListenDisposable.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Rx.config.useNativeEvents=!1;var EventObservable=function(__super__){function EventObservable(el,name,fn){this._el=el,this._n=name,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}return inherits(EventObservable,__super__),EventObservable.prototype.subscribeCore=function(o){return createEventListener(this._el,this._n,createHandler(o,this._fn))},EventObservable}(ObservableBase);Observable.fromEvent=function(element,eventName,selector){return element.addListener?fromEventPattern(function(h){element.addListener(eventName,h)},function(h){element.removeListener(eventName,h)},selector):Rx.config.useNativeEvents||"function"!=typeof element.on||"function"!=typeof element.off?new EventObservable(element,eventName,selector).publish().refCount():fromEventPattern(function(h){element.on(eventName,h)},function(h){
element.off(eventName,h)},selector)};var EventPatternObservable=function(__super__){function EventPatternObservable(add,del,fn){this._add=add,this._del=del,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}function EventPatternDisposable(del,fn,ret){this._del=del,this._fn=fn,this._ret=ret,this.isDisposed=!1}return inherits(EventPatternObservable,__super__),EventPatternObservable.prototype.subscribeCore=function(o){var fn=createHandler(o,this._fn),returnValue=this._add(fn);return new EventPatternDisposable(this._del,fn,returnValue)},EventPatternDisposable.prototype.dispose=function(){this.isDisposed||(isFunction(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},EventPatternObservable}(ObservableBase),fromEventPattern=Observable.fromEventPattern=function(addHandler,removeHandler,selector){return new EventPatternObservable(addHandler,removeHandler,selector).publish().refCount()},FromPromiseObservable=function(__super__){function FromPromiseObservable(p,s){this._p=p,this._s=s,__super__.call(this)}function scheduleNext(s,state){var o=state[0],data=state[1];o.onNext(data),o.onCompleted()}function scheduleError(s,state){var o=state[0],err=state[1];o.onError(err)}return inherits(FromPromiseObservable,__super__),FromPromiseObservable.prototype.subscribeCore=function(o){var sad=new SingleAssignmentDisposable,self=this;return this._p.then(function(data){sad.setDisposable(self._s.schedule([o,data],scheduleNext))},function(err){sad.setDisposable(self._s.schedule([o,err],scheduleError))}),sad},FromPromiseObservable}(ObservableBase),observableFromPromise=Observable.fromPromise=function(promise,scheduler){return scheduler||(scheduler=defaultScheduler),new FromPromiseObservable(promise,scheduler)};observableProto.toPromise=function(promiseCtor){if(promiseCtor||(promiseCtor=Rx.config.Promise),!promiseCtor)throw new NotSupportedError("Promise type not provided nor in Rx.config.Promise");var source=this;return new promiseCtor(function(resolve,reject){var value;source.subscribe(function(v){value=v},reject,function(){resolve(value)})})},Observable.startAsync=function(functionAsync){var promise=tryCatch(functionAsync)();return promise===errorObj?observableThrow(promise.e):observableFromPromise(promise)};var MulticastObservable=function(__super__){function MulticastObservable(source,fn1,fn2){this.source=source,this._fn1=fn1,this._fn2=fn2,__super__.call(this)}return inherits(MulticastObservable,__super__),MulticastObservable.prototype.subscribeCore=function(o){var connectable=this.source.multicast(this._fn1());return new BinaryDisposable(this._fn2(connectable).subscribe(o),connectable.connect())},MulticastObservable}(ObservableBase);observableProto.multicast=function(subjectOrSubjectSelector,selector){return isFunction(subjectOrSubjectSelector)?new MulticastObservable(this,subjectOrSubjectSelector,selector):new ConnectableObservable(this,subjectOrSubjectSelector)},observableProto.publish=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new Subject},selector):this.multicast(new Subject)},observableProto.share=function(){return this.publish().refCount()},observableProto.publishLast=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new AsyncSubject},selector):this.multicast(new AsyncSubject)},observableProto.publishValue=function(initialValueOrSelector,initialValue){return 2===arguments.length?this.multicast(function(){return new BehaviorSubject(initialValue)},initialValueOrSelector):this.multicast(new BehaviorSubject(initialValueOrSelector))},observableProto.shareValue=function(initialValue){return this.publishValue(initialValue).refCount()},observableProto.replay=function(selector,bufferSize,windowSize,scheduler){return selector&&isFunction(selector)?this.multicast(function(){return new ReplaySubject(bufferSize,windowSize,scheduler)},selector):this.multicast(new ReplaySubject(bufferSize,windowSize,scheduler))},observableProto.shareReplay=function(bufferSize,windowSize,scheduler){return this.replay(null,bufferSize,windowSize,scheduler).refCount()};var RefCountObservable=function(__super__){function RefCountObservable(source){this.source=source,this._count=0,this._connectableSubscription=null,__super__.call(this)}function RefCountDisposable(p,s){this._p=p,this._s=s,this.isDisposed=!1}return inherits(RefCountObservable,__super__),RefCountObservable.prototype.subscribeCore=function(o){var subscription=this.source.subscribe(o);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new RefCountDisposable(this,subscription)},RefCountDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},RefCountObservable}(ObservableBase),ConnectableObservable=Rx.ConnectableObservable=function(__super__){function ConnectableObservable(source,subject){this.source=source,this._connection=null,this._source=source.asObservable(),this._subject=subject,__super__.call(this)}function ConnectDisposable(parent,subscription){this._p=parent,this._s=subscription}return inherits(ConnectableObservable,__super__),ConnectDisposable.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},ConnectableObservable.prototype.connect=function(){if(!this._connection){var subscription=this._source.subscribe(this._subject);this._connection=new ConnectDisposable(this,subscription)}return this._connection},ConnectableObservable.prototype._subscribe=function(o){return this._subject.subscribe(o)},ConnectableObservable.prototype.refCount=function(){return new RefCountObservable(this)},ConnectableObservable}(Observable),TimerObservable=function(__super__){function TimerObservable(dt,s){this._dt=dt,this._s=s,__super__.call(this)}function scheduleMethod(s,o){o.onNext(0),o.onCompleted()}return inherits(TimerObservable,__super__),TimerObservable.prototype.subscribeCore=function(o){return this._s.scheduleFuture(o,this._dt,scheduleMethod)},TimerObservable}(ObservableBase),observableinterval=Observable.interval=function(period,scheduler){return observableTimerTimeSpanAndPeriod(period,period,isScheduler(scheduler)?scheduler:defaultScheduler)};Observable.timer=function(dueTime,periodOrScheduler,scheduler){var period;return isScheduler(scheduler)||(scheduler=defaultScheduler),null!=periodOrScheduler&&"number"==typeof periodOrScheduler?period=periodOrScheduler:isScheduler(periodOrScheduler)&&(scheduler=periodOrScheduler),(dueTime instanceof Date||"number"==typeof dueTime)&&period===undefined?_observableTimer(dueTime,scheduler):dueTime instanceof Date&&period!==undefined?observableTimerDateAndPeriod(dueTime,periodOrScheduler,scheduler):observableTimerTimeSpanAndPeriod(dueTime,period,scheduler)};observableProto.delay=function(){var firstArg=arguments[0];if("number"==typeof firstArg||firstArg instanceof Date){var dueTime=firstArg,scheduler=arguments[1];return isScheduler(scheduler)||(scheduler=defaultScheduler),dueTime instanceof Date?observableDelayAbsolute(this,dueTime,scheduler):observableDelayRelative(this,dueTime,scheduler)}if(Observable.isObservable(firstArg)||isFunction(firstArg))return delayWithSelector(this,firstArg,arguments[1]);throw new Error("Invalid arguments")};var DebounceObservable=function(__super__){function DebounceObservable(source,dt,s){isScheduler(s)||(s=defaultScheduler),this.source=source,this._dt=dt,this._s=s,__super__.call(this)}return inherits(DebounceObservable,__super__),DebounceObservable.prototype.subscribeCore=function(o){var cancelable=new SerialDisposable;return new BinaryDisposable(this.source.subscribe(new DebounceObserver(o,this._dt,this._s,cancelable)),cancelable)},DebounceObservable}(ObservableBase),DebounceObserver=function(__super__){function DebounceObserver(observer,dueTime,scheduler,cancelable){this._o=observer,this._d=dueTime,this._scheduler=scheduler,this._c=cancelable,this._v=null,this._hv=!1,this._id=0,__super__.call(this)}return inherits(DebounceObserver,__super__),DebounceObserver.prototype.next=function(x){this._hv=!0,this._v=x;var currentId=++this._id,d=new SingleAssignmentDisposable;this._c.setDisposable(d),d.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(_,self){self._hv&&self._id===currentId&&self._o.onNext(x),self._hv=!1}))},DebounceObserver.prototype.error=function(e){this._c.dispose(),this._o.onError(e),this._hv=!1,this._id++},DebounceObserver.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},DebounceObserver}(AbstractObserver);observableProto.debounce=function(){if(isFunction(arguments[0]))return debounceWithSelector(this,arguments[0]);if("number"==typeof arguments[0])return new DebounceObservable(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")};var TimestampObservable=function(__super__){function TimestampObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(TimestampObservable,__super__),TimestampObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TimestampObserver(o,this._s))},TimestampObservable}(ObservableBase),TimestampObserver=function(__super__){function TimestampObserver(o,s){this._o=o,this._s=s,__super__.call(this)}return inherits(TimestampObserver,__super__),TimestampObserver.prototype.next=function(x){this._o.onNext({value:x,timestamp:this._s.now()})},TimestampObserver.prototype.error=function(e){this._o.onError(e)},TimestampObserver.prototype.completed=function(){this._o.onCompleted()},TimestampObserver}(AbstractObserver);observableProto.timestamp=function(scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TimestampObservable(this,scheduler)};var SampleObservable=function(__super__){function SampleObservable(source,sampler){this.source=source,this._sampler=sampler,__super__.call(this)}return inherits(SampleObservable,__super__),SampleObservable.prototype.subscribeCore=function(o){var state={o:o,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new SingleAssignmentDisposable};return state.sourceSubscription.setDisposable(this.source.subscribe(new SampleSourceObserver(state))),new BinaryDisposable(state.sourceSubscription,this._sampler.subscribe(new SamplerObserver(state)))},SampleObservable}(ObservableBase),SamplerObserver=function(__super__){function SamplerObserver(s){this._s=s,__super__.call(this)}return inherits(SamplerObserver,__super__),SamplerObserver.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},SamplerObserver.prototype.next=function(){this._handleMessage()},SamplerObserver.prototype.error=function(e){this._s.onError(e)},SamplerObserver.prototype.completed=function(){this._handleMessage()},SamplerObserver}(AbstractObserver),SampleSourceObserver=function(__super__){function SampleSourceObserver(s){this._s=s,__super__.call(this)}return inherits(SampleSourceObserver,__super__),SampleSourceObserver.prototype.next=function(x){this._s.hasValue=!0,this._s.value=x},SampleSourceObserver.prototype.error=function(e){this._s.o.onError(e)},SampleSourceObserver.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},SampleSourceObserver}(AbstractObserver);observableProto.sample=function(intervalOrSampler,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),"number"==typeof intervalOrSampler?new SampleObservable(this,observableinterval(intervalOrSampler,scheduler)):new SampleObservable(this,intervalOrSampler)};var TimeoutError=Rx.TimeoutError=function(message){this.message=message||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};TimeoutError.prototype=Object.create(Error.prototype),observableProto.timeout=function(){var firstArg=arguments[0];if(firstArg instanceof Date||"number"==typeof firstArg)return timeout(this,firstArg,arguments[1],arguments[2]);if(Observable.isObservable(firstArg)||isFunction(firstArg))return timeoutWithSelector(this,firstArg,arguments[1],arguments[2]);throw new Error("Invalid arguments")},observableProto.throttle=function(windowDuration,scheduler){isScheduler(scheduler)||(scheduler=defaultScheduler);var duration=+windowDuration||0;if(0>=duration)throw new RangeError("windowDuration cannot be less or equal zero.");var source=this;return new AnonymousObservable(function(o){var lastOnNext=0;return source.subscribe(function(x){var now=scheduler.now();(0===lastOnNext||now-lastOnNext>=duration)&&(lastOnNext=now,o.onNext(x))},function(e){o.onError(e)},function(){o.onCompleted()})},source)};var PausableObservable=function(__super__){function PausableObservable(source,pauser){this.source=source,this.controller=new Subject,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableObservable,__super__),PausableObservable.prototype._subscribe=function(o){var conn=this.source.publish(),subscription=conn.subscribe(o),connection=disposableEmpty,pausable=this.pauser.distinctUntilChanged().subscribe(function(b){b?connection=conn.connect():(connection.dispose(),connection=disposableEmpty)});return new NAryDisposable([subscription,connection,pausable])},PausableObservable.prototype.pause=function(){this.controller.onNext(!1)},PausableObservable.prototype.resume=function(){this.controller.onNext(!0)},PausableObservable}(Observable);observableProto.pausable=function(pauser){return new PausableObservable(this,pauser)};var PausableBufferedObservable=function(__super__){function PausableBufferedObservable(source,pauser){this.source=source,this.controller=new Subject,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableBufferedObservable,__super__),PausableBufferedObservable.prototype._subscribe=function(o){function drainQueue(){for(;q.length>0;)o.onNext(q.shift())}var previousShouldFire,q=[],subscription=combineLatestSource(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(data,shouldFire){return{data:data,shouldFire:shouldFire}}).subscribe(function(results){previousShouldFire!==undefined&&results.shouldFire!==previousShouldFire?(previousShouldFire=results.shouldFire,results.shouldFire&&drainQueue()):(previousShouldFire=results.shouldFire,results.shouldFire?o.onNext(results.data):q.push(results.data))},function(err){drainQueue(),o.onError(err)},function(){drainQueue(),o.onCompleted()});return subscription},PausableBufferedObservable.prototype.pause=function(){this.controller.onNext(!1)},PausableBufferedObservable.prototype.resume=function(){this.controller.onNext(!0)},PausableBufferedObservable}(Observable);observableProto.pausableBuffered=function(pauser){return new PausableBufferedObservable(this,pauser)};var ControlledObservable=function(__super__){function ControlledObservable(source,enableQueue,scheduler){__super__.call(this),this.subject=new ControlledSubject(enableQueue,scheduler),this.source=source.multicast(this.subject).refCount()}return inherits(ControlledObservable,__super__),ControlledObservable.prototype._subscribe=function(o){return this.source.subscribe(o)},ControlledObservable.prototype.request=function(numberOfItems){return this.subject.request(null==numberOfItems?-1:numberOfItems)},ControlledObservable}(Observable),ControlledSubject=function(__super__){function ControlledSubject(enableQueue,scheduler){null==enableQueue&&(enableQueue=!0),__super__.call(this),this.subject=new Subject,this.enableQueue=enableQueue,this.queue=enableQueue?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=scheduler||currentThreadScheduler}return inherits(ControlledSubject,__super__),addProperties(ControlledSubject.prototype,Observer,{_subscribe:function(o){return this.subject.subscribe(o)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(error){this.hasFailed=!0,this.error=error,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnError(error)):(this.subject.onError(error),this.disposeCurrentRequest())},onNext:function(value){this.requestedCount<=0?this.enableQueue&&this.queue.push(Notification.createOnNext(value)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(value))},_processRequest:function(numberOfItems){if(this.enableQueue)for(;this.queue.length>0&&(numberOfItems>0||"N"!==this.queue[0].kind);){var first=this.queue.shift();first.accept(this.subject),"N"===first.kind?numberOfItems--:(this.disposeCurrentRequest(),this.queue=[])}return numberOfItems},request:function(number){this.disposeCurrentRequest();var self=this;return this.requestedDisposable=this.scheduler.schedule(number,function(s,i){var remaining=self._processRequest(i),stopped=self.hasCompleted||self.hasFailed;return!stopped&&remaining>0?(self.requestedCount=remaining,disposableCreate(function(){self.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),ControlledSubject}(Observable);observableProto.controlled=function(enableQueue,scheduler){return enableQueue&&isScheduler(enableQueue)&&(scheduler=enableQueue,enableQueue=!0),null==enableQueue&&(enableQueue=!0),new ControlledObservable(this,enableQueue,scheduler)},observableProto.pipe=function(dest){function onDrain(){source.resume()}var source=this.pausableBuffered();return dest.addListener("drain",onDrain),source.subscribe(function(x){!dest.write(String(x))&&source.pause()},function(err){dest.emit("error",err)},function(){!dest._isStdio&&dest.end(),dest.removeListener("drain",onDrain)}),source.resume(),dest};var TransduceObserver=function(__super__){function TransduceObserver(o,xform){this._o=o,this._xform=xform,__super__.call(this)}return inherits(TransduceObserver,__super__),TransduceObserver.prototype.next=function(x){var res=tryCatch(this._xform["@@transducer/step"]).call(this._xform,this._o,x);res===errorObj&&this._o.onError(res.e)},TransduceObserver.prototype.error=function(e){this._o.onError(e)},TransduceObserver.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},TransduceObserver}(AbstractObserver);observableProto.transduce=function(transducer){var source=this;return new AnonymousObservable(function(o){var xform=transducer(transformForObserver(o));return source.subscribe(new TransduceObserver(o,xform))},source)};var AnonymousObservable=Rx.AnonymousObservable=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.__subscribe).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function AnonymousObservable(subscribe,parent){this.source=parent,this.__subscribe=subscribe,__super__.call(this)}return inherits(AnonymousObservable,__super__),AnonymousObservable.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},AnonymousObservable}(Observable),AutoDetachObserver=function(__super__){function AutoDetachObserver(observer){__super__.call(this),this.observer=observer,this.m=new SingleAssignmentDisposable}inherits(AutoDetachObserver,__super__);var AutoDetachObserverPrototype=AutoDetachObserver.prototype;return AutoDetachObserverPrototype.next=function(value){var result=tryCatch(this.observer.onNext).call(this.observer,value);result===errorObj&&(this.dispose(),thrower(result.e))},AutoDetachObserverPrototype.error=function(err){var result=tryCatch(this.observer.onError).call(this.observer,err);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.completed=function(){var result=tryCatch(this.observer.onCompleted).call(this.observer);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.setDisposable=function(value){this.m.setDisposable(value)},AutoDetachObserverPrototype.getDisposable=function(){return this.m.getDisposable()},AutoDetachObserverPrototype.dispose=function(){__super__.prototype.dispose.call(this),this.m.dispose()},AutoDetachObserver}(AbstractObserver),InnerSubscription=function(s,o){this._s=s,this._o=o};InnerSubscription.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var idx=this._s.observers.indexOf(this._o);this._s.observers.splice(idx,1),this._o=null}};var Subject=Rx.Subject=function(__super__){function Subject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return inherits(Subject,__super__),addProperties(Subject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?this.hasError?(o.onError(this.error),disposableEmpty):(o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped)for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++)os[i].onNext(value)},dispose:function(){this.isDisposed=!0,this.observers=null}}),Subject.create=function(observer,observable){return new AnonymousSubject(observer,observable)},Subject}(Observable),AsyncSubject=Rx.AsyncSubject=function(__super__){function AsyncSubject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return inherits(AsyncSubject,__super__),addProperties(AsyncSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):this.hasValue?(o.onNext(this.value),o.onCompleted()):o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){var i,len;if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var os=cloneArray(this.observers),len=os.length;if(this.hasValue)for(i=0;len>i;i++){var o=os[i];o.onNext(this.value),o.onCompleted()}else for(i=0;len>i;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){checkDisposed(this),this.isStopped||(this.value=value,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),AsyncSubject}(Observable),AnonymousSubject=Rx.AnonymousSubject=function(__super__){function AnonymousSubject(observer,observable){this.observer=observer,this.observable=observable,__super__.call(this)}return inherits(AnonymousSubject,__super__),addProperties(AnonymousSubject.prototype,Observer.prototype,{_subscribe:function(o){return this.observable.subscribe(o)},onCompleted:function(){this.observer.onCompleted()},onError:function(error){this.observer.onError(error)},onNext:function(value){this.observer.onNext(value)}}),AnonymousSubject}(Observable),BehaviorSubject=Rx.BehaviorSubject=function(__super__){function BehaviorSubject(value){__super__.call(this),this.value=value,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return inherits(BehaviorSubject,__super__),addProperties(BehaviorSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):o.onCompleted(),disposableEmpty):(this.observers.push(o),o.onNext(this.value),new InnerSubscription(this,o))},getValue:function(){return checkDisposed(this),this.hasError&&thrower(this.error),this.value},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped){this.value=value;for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++)os[i].onNext(value)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),BehaviorSubject}(Observable),ReplaySubject=Rx.ReplaySubject=function(__super__){function createRemovableDisposable(subject,observer){return disposableCreate(function(){observer.dispose(),!subject.isDisposed&&subject.observers.splice(subject.observers.indexOf(observer),1)})}function ReplaySubject(bufferSize,windowSize,scheduler){this.bufferSize=null==bufferSize?maxSafeInteger:bufferSize,this.windowSize=null==windowSize?maxSafeInteger:windowSize,this.scheduler=scheduler||currentThreadScheduler,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,__super__.call(this)}var maxSafeInteger=Math.pow(2,53)-1;return inherits(ReplaySubject,__super__),addProperties(ReplaySubject.prototype,Observer.prototype,{_subscribe:function(o){checkDisposed(this);var so=new ScheduledObserver(this.scheduler,o),subscription=createRemovableDisposable(this,so);this._trim(this.scheduler.now()),this.observers.push(so);for(var i=0,len=this.q.length;len>i;i++)so.onNext(this.q[i].value);return this.hasError?so.onError(this.error):this.isStopped&&so.onCompleted(),so.ensureActive(),subscription},hasObservers:function(){return checkDisposed(this),this.observers.length>0},_trim:function(now){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&now-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(value){if(checkDisposed(this),!this.isStopped){var now=this.scheduler.now();this.q.push({interval:now,value:value}),this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++){var observer=os[i];observer.onNext(value),observer.ensureActive()}}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++){var observer=os[i];observer.onError(error),observer.ensureActive()}this.observers.length=0}},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;len>i;i++){var observer=os[i];observer.onCompleted(),observer.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),ReplaySubject}(Observable);Rx.Pauser=function(__super__){function Pauser(){__super__.call(this)}return inherits(Pauser,__super__),Pauser.prototype.pause=function(){this.onNext(!1)},Pauser.prototype.resume=function(){this.onNext(!0)},Pauser}(Subject),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root.Rx=Rx,define("7",[],function(){return Rx})):freeExports&&freeModule?moduleExports?(freeModule.exports=Rx).Rx=Rx:freeExports.Rx=Rx:root.Rx=Rx;var rEndingLine=captureLine()}).call(this),_removeDefine()}(),$__System.registerDynamic("8",["7"],!0,function($__require,exports,module){"use strict";var global=this,__define=global.define;global.define=void 0;var Rx=$__require("7"),EventStream=function(initialValue){this.value=initialValue,this.observable=new Rx.BehaviorSubject(initialValue),this.event=this.observable.publish(),this.event.connect()};return EventStream.prototype.emit=function(detail){return this.value=detail,this.observable.onNext(detail)},EventStream.prototype.listen=function(callback){return this.event.subscribe(callback)},EventStream.prototype.observe=function(callback){return this.observable.subscribe(callback)},EventStream.prototype.dispose=function(){return this.value=void 0,this.observable.onCompleted(),this.observable.dispose()},module.exports=EventStream,global.define=__define,module.exports}),$__System.registerDynamic("9",[],!1,function(__require,__exports,__module){var _retrieveGlobal=$__System.get("@@global-helpers").prepareGlobal(__module.id,null,null);return function(){!function(e){function f(a,c){function b(a){return this&&this.constructor===b?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=c,void(a&&v.call(this,a))):new b(a)}return c||w(a,"size",{get:x}),a.constructor=b,b.prototype=a,b}function v(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}function d(a){return this.has(a)&&(this._keys.splice(b,1),this._values.splice(b,1),this._itp.forEach(function(a){b<a[0]&&a[0]--})),b>-1}function m(a){return this.has(a)?this._values[b]:void 0}function n(a,c){if(this.objectOnly&&c!==Object(c))throw new TypeError("Invalid value used as weak collection key");if(c!=c||0===c)for(b=a.length;b--&&!y(a[b],c););else b=a.indexOf(c);return b>-1}function p(a){return n.call(this,this._values,a)}function q(a){return n.call(this,this._keys,a)}function r(a,c){return this.has(a)?this._values[b]=c:this._values[this._keys.push(a)-1]=c,this}function t(a){return this.has(a)||this._values.push(a),this}function h(){(this._keys||0).length=this._values.length=0}function z(){return k(this._itp,this._keys)}function l(){return k(this._itp,this._values)}function A(){return k(this._itp,this._keys,this._values)}function B(){return k(this._itp,this._values,this._values)}function k(a,c,b){var g=[0],e=!1;return a.push(g),{next:function(){var f,d=g[0];return!e&&d<c.length?(f=b?[c[d],b[d]]:c[d],g[0]++):(e=!0,a.splice(a.indexOf(g),1)),{done:e,value:f}}}}function x(){return this._values.length}function u(a,c){for(var b=this.entries();;){var d=b.next();if(d.done)break;a.call(c,d.value[1],d.value[0],this)}}var b,w=Object.defineProperty,y=function(a,b){return isNaN(a)?isNaN(b):a===b};"undefined"==typeof WeakMap&&(e.WeakMap=f({"delete":d,clear:h,get:m,has:q,set:r},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=f({"delete":d,has:q,get:m,set:r,keys:z,values:l,entries:A,forEach:u,clear:h})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=f({has:p,add:t,"delete":d,clear:h,keys:l,values:l,entries:B,forEach:u})),"undefined"==typeof WeakSet&&(e.WeakSet=f({"delete":d,add:t,clear:h,has:p},!0))}("undefined"!=typeof exports&&"undefined"!=typeof global?global:window)}(),_retrieveGlobal()}),$__System.registerDynamic("4",["6","5","3","8","9"],!0,function($__require,exports,module){"use strict";function createObserver(callback){var observer;return observer=function(event){event.isCanceled||callback(event.detail,event)}}function createAsyncObserver(callback){var observer;return observer=function(event){event.isCanceled||setAsyncTask(function(){
callback(event.detail,event)})}}function ensureStreamExists(emitter,name){var stream=emitter.subjects[name];return stream||(stream=new EventStream(new ConnexionEvent({type:name,timeStamp:0})),emitter.subscriptions[name]=new WeakMap,emitter.subjects[name]=stream),stream}function ensureStreamDestroyed(emitter,name){var stream=emitter.subjects[name];return stream&&(emitter.subscriptions[name]=null,emitter.subjects[name]=null),stream}var global=this,__define=global.define;global.define=void 0;var setAsyncTask=$__require("6").setAsyncTask,ConnexionEvent=$__require("5"),environment=$__require("3"),EventStream=$__require("8"),es6collections=$__require("9"),WeakMap=es6collections.WeakMap||environment.global.WeakMap,isNodeJs=environment.isNodeJs,Emitter=function(){this.subjects=Object.create(null),this.subscriptions=Object.create(null)};return Emitter.prototype.emit=function(eventType,detail){var stream,commonStream,event,eventData=eventType;return"string"==typeof eventType||eventType instanceof String?event=new ConnexionEvent({type:eventType,detail:detail,scope:isNodeJs?"nodejs":"window",emitter:isNodeJs?"nodejs":environment.global.name||""}):"object"!=typeof eventData||eventData instanceof Array||(event=new ConnexionEvent(eventData),eventType=event.type),stream=ensureStreamExists(this,eventType),commonStream=ensureStreamExists(this,"*"),setAsyncTask(stream.emit.bind(stream,event)),"*"!==eventType&&setAsyncTask(commonStream.emit.bind(commonStream,event)),event},Emitter.prototype.listen=function(eventType,handler){var listeners,stream,observer,subscription;if("object"==typeof eventType&&eventType){listeners=eventType;for(eventType in listeners)this.listen(eventType,listeners[eventType])}else eventType&&handler&&(stream=ensureStreamExists(this,eventType),observer=createObserver(handler),subscription=stream.listen(observer),listeners=this.subscriptions[eventType].get(handler)||[],listeners.push(subscription),this.subscriptions[eventType].set(handler,listeners),subscription.callback=handler);return subscription},Emitter.prototype.observe=function(eventType,handler){var listeners,stream,observer,subscription;if("object"==typeof eventType&&eventType){listeners=eventType;for(eventType in listeners)this.listen(eventType,listeners[eventType])}else eventType&&handler&&(stream=ensureStreamExists(this,eventType),observer=createAsyncObserver(handler),subscription=stream.observe(observer),listeners=this.subscriptions[eventType].get(handler)||[],listeners.push(subscription),this.subscriptions[eventType].set(handler,listeners),subscription.callback=handler);return subscription},Emitter.prototype.unsubscribe=function(eventType,handler){var listeners,stream,streams,subscription,subscriptions,i;if(eventType||handler){if("object"==typeof eventType&&eventType){listeners=eventType;for(eventType in listeners)this.unsubscribe(eventType,listeners[eventType])}else if(eventType&&!handler)stream=this.subjects[eventType],stream&&(stream.dispose(),ensureStreamDestroyed(this,eventType));else if(eventType&&handler&&(subscriptions=this.subscriptions[eventType]))if("dispose"in handler){if(subscription=handler,handler=subscription.callback,subscription.dispose(),subscription.callback=void 0,listeners=subscriptions.get(handler))for(i=-1;++i in listeners;)if(subscription===listeners[i]){listeners.splice(i,1);break}}else if(listeners=subscriptions.get(handler)){for(i=-1;++i in listeners;)subscription=listeners[i],subscription.dispose(),subscription.callback=void 0;subscriptions["delete"](handler)}}else{streams=this.subjects;for(eventType in streams)this.unsubscribe(eventType)}return this},module.exports=new Emitter,global.define=__define,module.exports}),$__System.registerDynamic("1",["2","3","4"],!0,function($__require,exports,module){"use strict";var global=this,__define=global.define;global.define=void 0;var connexion=exports;connexion.version="0.3.1",connexion.chanel=$__require("2");var DOMWindow=$__require("3").window,emitter=$__require("4");return connexion.listen=function(type,handler){return emitter.listen(type,handler),this},connexion.observe=function(type,handler){return emitter.observe(type,handler),this},connexion.unsubscribe=function(type,handler){return emitter.unsubscribe(type,handler),this},connexion.emit=function(type,detail){return emitter.emit(type,detail),this},DOMWindow.connexion=connexion,global.define=__define,module.exports})})(function(factory){"function"==typeof define&&define.amd?define([],factory):factory()});
//# sourceMappingURL=connexion.min.js.map